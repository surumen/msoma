webpackJsonp([20],{0:function(g,b,a){a(3576);a(1157);a(524);a(604);a(606);a(1151);a(1165);a(1152);a(1153);a(1155);a(605);a(1146);a(1154);a(1156);a(1150);a(1017);a(916);a(1016);a(1015);a(1158);a(1159);a(1160);a(1161);a(1163);a(1164);a(1166)},13:function(g,b,a){b.__esModule=!0;g=a(16);b.default=(g&&g.__esModule?g:{"default":g}).default||function(a){for(var b=1;b<arguments.length;b++){var h=arguments[b],c;for(c in h)Object.prototype.hasOwnProperty.call(h,c)&&(a[c]=h[c])}return a}},19:function(g,b,a){g.exports=
{"default":a(311),__esModule:!0}},44:function(g,b,a){var k=(b=a(4))&&b.__esModule?b:{"default":b},e=(b=a(7))&&b.__esModule?b:{"default":b};a=a(9);b=function(){function a(){(0,k.default)(this,a)}(0,e.default)(a,[{key:"bootstrap",value:function(a){this.dispatch(a)}}]);return a}();a=a.createActions(b);window.StaticActions=a;g.exports=a},46:function(g,b,a){g.exports={"default":a(310),__esModule:!0}},49:function(g,b,a){b=a(224);a=a(229)(b);g.exports=a},50:function(g,b,a){function k(a){return a&&a.__esModule?
a:{"default":a}}b.__esModule=!0;g=a(307);var e=k(g);g=a(235);var h=k(g);a=a(77);var c=k(a);b.default=function(a,d){if("function"!==typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof d?"undefined":(0,c.default)(d)));a.prototype=(0,h.default)(d&&d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});d&&(e.default?(0,e.default)(a,d):a.__proto__=d)}},51:function(g,b,a){b.__esModule=!0;var k=(g=a(77))&&g.__esModule?
g:{"default":g};b.default=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"===("undefined"===typeof b?"undefined":(0,k.default)(b))||"function"===typeof b)?b:a}},52:function(g,b,a){Object.defineProperty(b,"__esModule",{value:!0});var k=(a=a(26))&&a.__esModule?a:{"default":a};b["default"]=function(a){a.config={setState:function(a,c){return this.state=c},getState:function(a){return a},onSerialize:function(a){return a.toJS()},
onDeserialize:function(a){return k["default"].fromJS(a)}};return a};g.exports=b["default"]},56:function(g,b){var a=Math.max;g.exports=function(b,e){if("function"!=typeof b)throw new TypeError("Expected a function");e=a(void 0===e?b.length-1:+e||0,0);return function(){for(var h=arguments,c=-1,f=a(h.length-e,0),d=Array(f);++c<f;)d[c]=h[e+c];switch(e){case 0:return b.call(this,d);case 1:return b.call(this,h[0],d);case 2:return b.call(this,h[0],h[1],d)}f=Array(e+1);for(c=-1;++c<e;)f[c]=h[c];f[e]=d;return b.apply(this,
f)}}},65:function(g,b,a){function k(a,m,b,s){s||(s=[]);for(var q=-1,n=a.length;++q<n;){var g=a[q];d(g)&&f(g)&&(b||c(g)||h(g))?m?k(g,m,b,s):e(s,g):b||(s[s.length]=g)}return s}var e=a(352),h=a(161),c=a(27),f=a(62),d=a(73);g.exports=k},76:function(g,b,a){var k=a(65),e=a(100),h=a(244),c=a(245);b=a(56)(function(a,d){return null==a?{}:"function"==typeof d[0]?c(a,e(d[0],d[1],3)):h(a,k(d))});g.exports=b},88:function(g,b,a){var k=a(63),e=a(31),h=a(181);g.exports=function(a,f){var d=(e.Object||{})[a]||Object[a],
b={};b[a]=f(d);k(k.S+k.F*h(function(){d(1)}),"Object",b)}},95:function(g,b,a){var k=(b=a(4))&&b.__esModule?b:{"default":b},e=(b=a(7))&&b.__esModule?b:{"default":b};b=a(9);var h=a(52),c=a(44),f=a(337),d=a(536);a=function(){function a(){(0,k.default)(this,a);this.state=new d;this.bindActions(f);this.bindListeners({onStaticBootstrap:c.BOOTSTRAP});this.exportPublicMethods({save:this.save})}(0,e.default)(a,[{key:"onStaticBootstrap",value:function(a){this.setState(new d(a.websiteSettings))}},{key:"onUpdate",
value:function(a){this.setState(this.state.merge(a))}},{key:"save",value:function(a){a=this.getState().mergeDeep(a).toJS();return f.save(a)}}]);return a}();g.exports=b.createStore(h(a),"WebsiteSettingsStore")},99:function(g,b,a){function k(a){return a&&a.__esModule?a:{"default":a}}b=a(19);var e=k(b);b=a(16);var h=k(b);b=a(4);var c=k(b);b=a(7);var f=k(b),d=a(185);b=a(9);var l=a(776),m=a(44),r=a(291),s=a(163),q=a(568);a=a(1051);var n=a.DEFAULT_COLLECTION_CONFIGURATIONS,u=a.DEFAULT_COLLECTION_CONFIGURATION,
t=a.DEFAULT_TEMPLATE_PAGE_CONFIGURATION;a=function(){function a(){(0,c.default)(this,a);this.bindListeners({handleLoadTemplate:r.LOAD_TEMPLATE,staticInitialized:m.BOOTSTRAP});this.exportPublicMethods({isTemplateOwner:this.isTemplateOwner,getCollectionConfig:this.getCollectionConfig,getCustomType:this.getCustomType,getPageConfig:this.getPageConfig})}(0,f.default)(a,[{key:"getCollectionConfig",value:function(a){return this.getState().collectionConfigs[a]}},{key:"getCustomType",value:function(a){return this.getState().customTypes[a]}},
{key:"getPageConfig",value:function(a){return this.getState().pageConfigs[a]}},{key:"isTemplateOwner",value:function(){var a=this.getState();return a.ownerWebsiteId===a.websiteId}},{key:"staticInitialized",value:function(a){this.setTemplateData(a.template);this.demoCollections=this.processDemoCollections(a.demoCollections);this.websiteId=a.website.id}},{key:"handleLoadTemplate",value:function(a){this.waitFor(l.dispatchToken);a.error?this.error=a.response:(this.error=null,this.setTemplateData(a.template),
this.demoCollections=this.processDemoCollections(a.demoCollections))}},{key:"setTemplateData",value:function(a){a&&(this.id=a.id,this.name=a.name,this.updatedOn=a.updatedOn,this.ownerWebsiteId=a.ownerWebsiteId,this.collectionConfigs=this.processCollectionConfigs(a.collectionConfigs),this.pageConfigs=this.processPageConfigs(a.pageConfigs),this.customTypes=this.processCustomTypes(a.customTypes),this.layouts=this.processLayouts(a.layouts),this.navigations=a.navigations)}},{key:"processCollectionConfigs",
value:function(a){a.products&&(a.products=(0,h.default)({},n.products,a.products),a.products.acceptTypes&&0===a.products.acceptTypes.length&&(a.products.acceptTypes=n.products.acceptTypes),a.products.ordering=s.USER);a.page&&(a.page=(0,h.default)({},n.page,a.page));a=(0,h.default)({},n,a);a=d(a,function(a){a=(0,h.default)({},u,a);!0===a.index?a.folderBehavior=q.INDEX:!0===a.folder&&(a.folderBehavior=q.NONE);return a});var c=a.folders||a.folder;c&&(c.acceptTypes=this.calculateFolderAcceptTypes(a));
return a}},{key:"calculateFolderAcceptTypes",value:function(a){var d=["subscription","gallery-block","template-page"];return(0,e.default)(a).filter(function(c){return a[c].folder?!1:-1===d.indexOf(c)}).concat(["link"])}},{key:"processPageConfigs",value:function(a){return d(a,function(a){return(0,h.default)({},t,a)})}},{key:"processCustomTypes",value:function(){return(0>=arguments.length||void 0===arguments[0]?[]:arguments[0]).reduce(function(a,d){a[d.name]=d;return a},{})}},{key:"processDemoCollections",
value:function(a){return a||[]}},{key:"processLayouts",value:function(a){return a||{}}}]);return a}();g.exports=b.createStore(a,"TemplateStore")},140:function(g,b,a){function k(a){return a&&a.__esModule?a:{"default":a}}b=a(29);var e=k(b);b=a(4);var h=k(b);b=a(7);var c=k(b);b=a(9);var f=a(434);a=function(){function a(){(0,h.default)(this,a);this.generateActions("insert")}(0,c.default)(a,[{key:"read",value:function(a){var c=this,d=1>=arguments.length||void 0===arguments[1]?!1:arguments[1],b=arguments[2];
this.dispatch(a);return f.read(a,d,b).then(function(a){return c.actions.insert(a.data)}).catch(function(a){a=a.data;return e.default.reject(a.message||a)})}},{key:"readForCollection",value:function(a){var c=this;this.dispatch(a);return f.readForCollection(a).then(function(a){(a=a.data)&&a.results.forEach(function(a){return c.actions.insert(a)});return e.default.resolve(a)}).catch(function(a){a=a.data;return e.default.reject(a.message||a)})}},{key:"update",value:function(a,c){var d=this;this.dispatch(a.id);
return a.field?f.updateField(a).then(function(a){return d.actions.insert(a.data.item)}).catch(function(a){a=a.data;return e.default.reject(a.message||a)}):f.update(a,c).then(function(a){a=a.data;d.actions.insert(a);return a}).catch(function(a){a=a.data;return e.default.reject(a.message||a)})}},{key:"updateForCollection",value:function(a,c){var d=this;return f.updateForCollection(a,c).then(function(a){return d.actions.insert(a.data)}).catch(function(a){a=a.data;return e.default.reject(a.message||a)})}},
{key:"create",value:function(a,c,d){var b=this;return f.create(a,c,d).then(function(a){a=a.data;b.actions.insert(a);return a}).catch(function(a){a=a.data;return e.default.reject(a.message||a)})}},{key:"createForCollection",value:function(a,c,d){var b=this;return f.createForCollection(a,c,d).then(function(a){a=a.data;b.actions.insert(a);return a}).catch(function(a){a=a.data;return e.default.reject(a.message||a)})}},{key:"delete",value:function(a,c){this.dispatch(a);return f.delete(a,c).catch(function(a){a=
a.data;return e.default.reject(a.message||a)})}},{key:"deleteMany",value:function(a){this.dispatch(a);return f.deleteMany(a)}}]);return a}();g.exports=b.createActions(a)},145:function(g,b,a){var k=a(771),e=a(38),h=a(523),c=a(27),f=a(39);g.exports=function(a,b,m){var r=c(a)?k:h;m&&f(a,b,m)&&(b=void 0);if("function"!=typeof b||void 0!==m)b=e(b,m,3);return r(a,b)}},157:function(g,b,a){function k(a){return a&&a.__esModule?a:{"default":a}}b=a(29);var e=k(b);b=a(4);var h=k(b);b=a(7);var c=k(b);b=a(26);
var f=b.Map,d=b.fromJS;b=a(9);var l=a(140);a=a(52);var m=function(){function a(){(0,h.default)(this,a);this.state=f();this.bindActions(l);this.exportPublicMethods({fetch:this.fetch,fetchForCollection:this.fetchForCollection,getForCollection:this.getForCollection})}(0,c.default)(a,[{key:"onInsert",value:function(a){this.setState(this.state.set(a.id,d(a)))}},{key:"onDelete",value:function(a){this.setState(this.state.delete(a))}},{key:"onDeleteMany",value:function(a){this.setState(this.state.filter(function(c,
d){return-1===a.indexOf(d)}))}},{key:"fetch",value:function(a){var c=this,d=1>=arguments.length||void 0===arguments[1]?!1:arguments[1],f=arguments[2];if(!a)return e.default.resolve();var b=this.getState().get(a);return b?e.default.resolve(b):l.read(a,d,f).then(function(){return c.getState().get(a)})}},{key:"fetchForCollection",value:function(a){var c=this,d=this.getForCollection(a);return 0<d.size?e.default.resolve(d):l.readForCollection(a).then(function(){return c.getForCollection(a)})}},{key:"getForCollection",
value:function(a){return this.getState().filter(function(c){return c.get("collectionId")===a})}}]);return a}();g.exports=b.createStore(a(m),"ContentItemStore")},158:function(g,b,a){b.__esModule=!0;var k=(g=a(46))&&g.__esModule?g:{"default":g},e=(a=a(306))&&a.__esModule?a:{"default":a};b.default=function c(a,d,b){null===a&&(a=Function.prototype);var m=(0,e.default)(a,d);if(void 0===m)return a=(0,k.default)(a),null===a?void 0:c(a,d,b);if("value"in m)return m.value;d=m.get;return void 0===d?void 0:d.call(b)}},
162:function(g,b){g.exports={AUTHENTICATED:0,CONFIG:1,ADMIN:2,CONFIG_CONTENT_MANAGER:11,CONFIG_SETTINGS:12,CONFIG_ACTIVITY:13,CONFIG_COMMERCE:14,CONFIG_NEWSLETTER:15,CONFIG_DAMASK:17,CONFIG_CHANGE_STRUCTURE:1110,CONFIG_TRUSTED_COMMENTER:1111,CONFIG_SETTINGS_GENERAL:1210,CONFIG_SETTINGS_LOCALE:1211,CONFIG_SETTINGS_SOCIAL_ACCOUNT:1212,CONFIG_SETTINGS_FACEBOOK:1213,CONFIG_SETTINGS_SOCIAL_SETTINGS:1214,CONFIG_SETTINGS_MEMBER_ACCOUNTS:1215,CONFIG_SETTINGS_DOMAIN:1216,CONFIG_SETTINGS_TEMPLATE:1217,CONFIG_SETTINGS_IMPORT:1218,
CONFIG_SETTINGS_CODEINJECT:1219,CONFIG_SETTINGS_ADVANCED:1220,CONFIG_SETTINGS_DEVELOPER:1221,CONFIG_SETTINGS_SESSIONS:1222,CONFIG_SETTINGS_MOBILE:1223,CONFIG_SETTINGS_BILLING:1224,CONFIG_SETTINGS_SUPPORT:1225,CONFIG_SETTINGS_SITE:1226,CONFIG_SETTINGS_LABS:1227,CONFIG_SETTINGS_ADVERTISING:1228,CONFIG_ACTIVITY_STATS:1310,CONFIG_ACTIVITY_COMMENTS:1311,CONFIG_COMMERCE_ORDERS:1410,CONFIG_COMMERCE_STORE_SETTINGS:1411,CONFIG_COMMERCE_SHIPPING:1412,CONFIG_COMMERCE_COUPONS:1413,CONFIG_COMMERCE_TAXES:1414,
CONFIG_COMMERCE_EMAIL_NOTIFICATIONS:1415,CONFIG_COMMERCE_INVENTORY:1416,CONFIG_COMMERCE_DONATIONS:1417,CONFIG_COMMERCE_ACCOUNTING:1418,CONFIG_COMMERCE_DISCOUNTS:1419,CONFIG_NEWSLETTER_READ_SUBSCRIBER:1510,CONFIG_NEWSLETTER_WRITE_SUBSCRIBER:1511,CONFIG_NEWSLETTER_READ_GROUP:1512,CONFIG_NEWSLETTER_WRITE_GROUP:1513,CONFIG_NEWSLETTER_READ_MESSAGE:1514,CONFIG_NEWSLETTER_WRITE_MESSAGE:1515,CONFIG_NEWSLETTER_READ_SETTINGS:1516,CONFIG_NEWSLETTER_WRITE_SETTINGS:1517,CONFIG_ACCEPT_TOS:1610,CONFIG_DOMAINS_REMOVE:1611,
CONFIG_DOMAINS_ADD:1612,ADMIN_GRANT_ACCESS:2010,ADMIN_BILLING_READ:2011,ADMIN_BILLING_WRITE:2012,ADMIN_READ_CUSTOMER_DATA:2013,ADMIN_WRITE_CUSTOMER_DATA:2014,ADMIN_DEV_SETTINGS:2015,ADMIN_MARKETING_READ:2016,ADMIN_MARKETING_WRITE:2017,ADMIN_LOGINAS:2018,ADMIN_TEMPLATE_SETTINGS:2019,ADMIN_SYSTEM_JSON_VIEW:2020,ADMIN_TAXONOMY:2021,ADMIN_CHANGE_USER_EMAIL:2022,ADMIN_ADD_NOTE:2023,ADMIN_EDIT_OTHER_NOTES:2024,ADMIN_EXTEND_TRIAL:2025,ADMIN_BIZPIPE_STATS_MOBILE_ACCESS:2026,ADMIN_REFERRALS:2027,ADMIN_BILLING_REFUND:2028,
ADMIN_BILLING_APPLY_EDU_DISCOUNT:2029,ADMIN_DEACTIVATE_SQUARESPACE_ACCOUNT:2030,ADMIN_BILLING_EXPIRE:2031,ADMIN_CHANGE_MAX_COMPS:2032,ADMIN_CHANGE_GUILDS:2033,ADMIN_DOMAIN_WRITE:2034,ADMIN_GOOGLE_APPS_WRITE:2035,ADMIN_ADD_CONTRIBUTER:2036,ADMIN_CHANGE_WEBSITE_OWNER:2037,ADMIN_REMOVE_CONTRIBUTER:2038,ADMIN_TAXATION_READ:2039,ADMIN_SUSPEND:2040,ADMIN_TAXATION_WRITE:2041,ADMIN_LOGINAS_PUBLIC:2042,ADMIN_MASS_REMOVAL:2043,ADMIN_REMOVE_SITE:2044}},164:function(g,b,a){function k(a){return{url:F[a.action].replace("{collectionId}",
a.collectionId),isFallback:!0}}function e(a){return{url:G[a.collectionType][a.action].replace("{collectionId}",a.collectionId).replace("{parentId}",a.parentId),isFallback:!1}}function h(){var a=0>=arguments.length||void 0===arguments[0]?{}:arguments[0];if(!a.collectionId)return{url:H[a.action],isFallback:!0};if(a.parentId)return a.collectionType===w.PRODUCTS?e(a):k(a);var c=I[a.collectionOrdering];if(!c)return k(a);c=c[a.recordType];return!c?k(a):{url:c[a.action].replace("{collectionId}",a.collectionId),
isFallback:!1}}var c=(b=a(13))&&b.__esModule?b:{"default":b},f,d,l,m,r,s,q,n,u,t,A,B,D,C,z,x,y,p=a(173),v=a(96);b=a(163);var w=a(36),I=(u={},u[b.CHRONOLOGICAL]=(m={},m[v.TEXT]=(f={},f[p.GET]="/api/content/blogs/{collectionId}/text-posts/{id}",f[p.POST]="/api/content/blogs/{collectionId}/text-posts",f[p.PUT]="/api/content/blogs/{collectionId}/text-posts/{id}",f[p.DELETE]="/api/content/blogs/{collectionId}/text-posts/{id}",f),m[v.IMAGE]=(d={},d[p.GET]="/api/content/blogs/{collectionId}/image-posts/{id}",
d[p.POST]="/api/content/blogs/{collectionId}/image-posts",d[p.PUT]="/api/content/blogs/{collectionId}/image-posts/{id}",d[p.DELETE]="/api/content/blogs/{collectionId}/image-posts/{id}",d),m[v.VIDEO]=(l={},l[p.GET]="/api/content/blogs/{collectionId}/video-posts/{id}",l[p.POST]="/api/content/blogs/{collectionId}/video-posts",l[p.PUT]="/api/content/blogs/{collectionId}/video-posts/{id}",l[p.DELETE]="/api/content/blogs/{collectionId}/video-posts/{id}",l),m),u[b.CALENDAR]=(s={},s[v.EVENT]=(r={},r[p.GET]=
"/api/content/calendars/{collectionId}/events/{id}",r[p.POST]="/api/content/calendars/{collectionId}/events",r[p.PUT]="/api/content/calendars/{collectionId}/events/{id}",r[p.DELETE]="/api/content/calendars/{collectionId}/events/{id}",r),s),u[b.USER]=(n={},n[v.STORE_ITEM]=(q={},q[p.GET]="/api/content/product-pages/{collectionId}/products/{id}",q[p.POST]="/api/content/product-pages/{collectionId}/products",q[p.PUT]="/api/content/product-pages/{collectionId}/products/{id}",q[p.DELETE]="/api/content/product-pages/{collectionId}/products/{id}",
q),n),u),G=(A={},A[w.PRODUCTS]=(t={},t[p.GET]="/api/content/product-pages/{collectionId}/products/{parentId}/images/{id}",t[p.POST]="/api/content/product-pages/{collectionId}/products/{parentId}/images",t[p.PUT]="/api/content/product-pages/{collectionId}/products/{parentId}/images/{id}",t[p.DELETE]="/api/content/product-pages/{collectionId}/products/{parentId}/images/{id}",t),A),E=(z={},z[b.CHRONOLOGICAL]=(B={},B[w.COLLECTION_TYPE_GENERIC]="/api/content/blogs/{collectionId}/posts",B),z[b.CALENDAR]=
(D={},D[w.COLLECTION_TYPE_GENERIC]="/api/content/calendars/{collectionId}/events",D),z[b.USER]=(C={},C[w.PRODUCTS]="/api/content/product-pages/{collectionId}/products",C),z),F=(x={},x[p.GET]="/api/content-collections/{collectionId}/content-items/{id}",x[p.POST]="/api/content-collections/{collectionId}/content-items",x[p.PUT]="/api/content-collections/{collectionId}/content-items/{id}",x[p.DELETE]="/api/content-collections/{collectionId}/content-items/{id}",x),H=(y={},y[p.GET]="/api/content-items/{id}",
y[p.POST]="/api/content-items",y[p.PUT]="/api/content-items/{id}",y[p.DELETE]="/api/content-items/{id}",y);g.exports={getTemplateForSingleItem:function(){return h(0>=arguments.length||void 0===arguments[0]?{}:arguments[0]).url},getTemplateForCollectionItems:function(a,c){if(!a)return"/api/content-collections/{collectionId}/content-items";var d=void 0;E.hasOwnProperty(a)&&(d=E[a][c]);return!d?"/api/content-collections/{collectionId}/content-items":d},getMainImageUploadUrl:function(){var a=0>=arguments.length||
void 0===arguments[0]?{}:arguments[0],a=h((0,c.default)({},a,{action:p.DELETE}));return a.isFallback?"/api/commondata/SaveMedia":a.url+"/main-image"},getMainImageDeletionUrl:function(){var a=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],a=h((0,c.default)({},a,{action:p.DELETE}));return a.isFallback?"/api/commondata/ClearEmbeddedAsset":a.url+"/main-image"},getChildImageUploadUrl:function(){var a=0>=arguments.length||void 0===arguments[0]?{}:arguments[0];return a.recordType===v.STORE_ITEM?
e({collectionType:w.PRODUCTS,recordType:v.STORE_ITEM,action:p.POST,parentId:a.parentId,collectionId:a.collectionId}).url:"/api/commondata/SaveMedia"}}},173:function(g,b){g.exports={GET:1,POST:2,PUT:3,DELETE:4}},176:function(g,b,a){var k=a(521),e=a(38),h=a(522),c=a(27),f=a(39);g.exports=function(a,b,m){var r=c(a)?k:h;m&&f(a,b,m)&&(b=void 0);if("function"!=typeof b||void 0!==m)b=e(b,m,3);return r(a,b)}},229:function(g,b,a){var k=a(151),e=a(92),h=a(132);g.exports=function(a,f){return function(d,b){var m=
d?k(d):0;if(!e(m))return a(d,b);for(var r=f?m:-1,s=h(d);(f?r--:++r<m)&&!1!==b(s[r],r,s););return d}}},230:function(g,b,a){var k=a(73),e=Object.prototype.toString;g.exports=function(a){return"number"==typeof a||k(a)&&"[object Number]"==e.call(a)}},235:function(g,b,a){g.exports={"default":a(308),__esModule:!0}},244:function(g,b,a){var k=a(132);g.exports=function(a,b){a=k(a);for(var c=-1,f=b.length,d={};++c<f;){var l=b[c];l in a&&(d[l]=a[l])}return d}},245:function(g,b,a){var k=a(271);g.exports=function(a,
b){var c={};k(a,function(a,d,e){b(a,d,e)&&(c[d]=a)});return c}},268:function(g,b){g.exports={QUEUED:1,PROCESSING:2,READY:3,ERROR:4,DOWNLOAD_ERROR:5,ERROR_TOO_LARGE:6,ERROR_FILE_NOT_FOUND:7,ERROR_UNSUPPORTED_IMAGE_TYPE:8,ERROR_UNSUPPORTED_AUDIO_TYPE:9}},271:function(g,b,a){var k=a(597),e=a(128);g.exports=function(a,c){return k(a,c,e)}},285:function(g,b,a){var k=(b=a(4))&&b.__esModule?b:{"default":b},e=(b=a(7))&&b.__esModule?b:{"default":b},h=a(26).Set,c=a(176),f=a(145);b=a(9);var d=a(52),l=a(162),
m=a(44),r=a(27),s=a(230),q=function(a){return r(a)&&a.every(function(a){return s(a)})};a=function(){function a(){(0,k.default)(this,a);this.state=h();this.bindListeners({onStaticBootstrap:m.BOOTSTRAP});this.exportPublicMethods({hasPermission:this.hasPermission,hasAllPermissions:this.hasAllPermissions,hasAnyPermission:this.hasAnyPermission,isAdmin:this.isAdmin})}(0,e.default)(a,[{key:"onStaticBootstrap",value:function(a){a=a.accessPermissions;return q(a)?(this.setState(h(a)),!0):!1}},{key:"hasPermission",
value:function(a){var c=this.getState(),d="string"===typeof a?l[a]:a;if(void 0===d)throw Error(a?"Permission '"+a+"' not found.":"Permission is undefined.");return c.has(d)}},{key:"hasAllPermissions",value:function(a){return c(a,this.hasPermission,this)}},{key:"hasAnyPermission",value:function(a){return f(a,this.hasPermission,this)}},{key:"isAdmin",value:function(){return this.hasPermission(l.ADMIN)}}]);return a}();g.exports=b.createStore(d(a),"AccessPermissionStore")},291:function(g,b,a){var k=(b=
a(4))&&b.__esModule?b:{"default":b},e=(b=a(7))&&b.__esModule?b:{"default":b};b=a(9);var h=a(963);a=function(){function a(){(0,k.default)(this,a)}(0,e.default)(a,[{key:"loadTemplate",value:function(a){var c=this;h.getTemplate(a).then(function(a){c.dispatch(a.data)},function(a){c.dispatch({error:!0,response:a})})}}]);return a}();g.exports=b.createActions(a)},295:function(g,b,a){function k(a){return a&&a.__esModule?a:{"default":a}}b=a(286);var e=k(b);b=a(77);var h=k(b);a=a(19);var c=k(a);g.exports=function(a){var d=
{};(0,c.default)(a).map(function(c){var b=a[c];"object"===("undefined"===typeof b?"undefined":(0,h.default)(b))?d[c]=(0,e.default)(b):void 0!==b&&(d[c]=b)});return d}},302:function(g,b,a){function k(a){return a&&a.__esModule?a:{"default":a}}b=a(16);var e=k(b);b=a(4);var h=k(b);b=a(7);var c=k(b),f=a(917),d=a(964);b=a(9);var l=a(584),m=a(291);a=function(){function a(){(0,h.default)(this,a)}(0,c.default)(a,[{key:"loadAll",value:function(){var a=this;this.dispatch();return d.loadTemplateInstallations().then(function(c){a.actions.loadSuccess(c.data)},
function(c){a.actions.loadFailure(c.error)})}},{key:"setPreviewInstallation",value:function(a,c,d){var b=this,t=(0,e.default)({},a,{previewInstallationId:c});f.save(a.id,t).then(function(a){m.loadTemplate.defer(d);b.dispatch(c);setTimeout(function(){return l.setUrl("/")},1E3)},function(a){})}},{key:"setLiveInstallation",value:function(a,c){var b=this;d.setLiveInstallation(a).then(function(d){m.loadTemplate.defer(c);b.dispatch(a);setTimeout(l.refresh,1E3)},function(a){})}},{key:"setHomepageCollectionId",
value:function(a){var c=this;return d.setHomepageCollectionId(a).then(function(d){d={homepageCollectionId:a};c.dispatch(d);return d},function(d){d={homepageCollectionId:a,error:!0};c.dispatch(d);return d})}},{key:"updateInstallation",value:function(a){return d.updateInstallation(a).then(this.actions.loadAll)}},{key:"loadSuccess",value:function(a){this.dispatch(a)}},{key:"loadFailure",value:function(a){this.dispatch(a)}}]);return a}();g.exports=b.createActions(a)},306:function(g,b,a){g.exports={"default":a(309),
__esModule:!0}},307:function(g,b,a){g.exports={"default":a(312),__esModule:!0}},308:function(g,b,a){a(314);var k=a(31).Object;g.exports=function(a,b){return k.create(a,b)}},309:function(g,b,a){a(315);var k=a(31).Object;g.exports=function(a,b){return k.getOwnPropertyDescriptor(a,b)}},310:function(g,b,a){a(316);g.exports=a(31).Object.getPrototypeOf},311:function(g,b,a){a(317);g.exports=a(31).Object.keys},312:function(g,b,a){a(318);g.exports=a(31).Object.setPrototypeOf},313:function(g,b,a){var k=a(134),
e=a(138),h=function(a,b){e(a);if(!k(b)&&null!==b)throw TypeError(b+": can't set as prototype!");};g.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(c,b,d){try{d=a(220)(Function.call,a(250).f(Object.prototype,"__proto__").set,2),d(c,[]),b=!(c instanceof Array)}catch(e){b=!0}return function(a,c){h(a,c);b?a.__proto__=c:d(a,c);return a}}({},!1):void 0),check:h}},314:function(g,b,a){g=a(63);g(g.S,"Object",{create:a(435)})},315:function(g,b,a){var k=a(139),e=a(250).f;a(88)("getOwnPropertyDescriptor",
function(){return function(a,c){return e(k(a),c)}})},316:function(g,b,a){var k=a(155),e=a(614);a(88)("getPrototypeOf",function(){return function(a){return e(k(a))}})},317:function(g,b,a){var k=a(155),e=a(165);a(88)("keys",function(){return function(a){return e(k(a))}})},318:function(g,b,a){g=a(63);g(g.S,"Object",{setPrototypeOf:a(313).set})},337:function(g,b,a){var k=(b=a(4))&&b.__esModule?b:{"default":b},e=(b=a(7))&&b.__esModule?b:{"default":b};b=a(9);var h=a(25);a=function(){function a(){(0,k.default)(this,
a);this.generateActions("update")}(0,e.default)(a,[{key:"save",value:function(a){var c=this;return h.put("/api/settings",a).then(function(a){return c.actions.update(a.data)})}}]);return a}();g.exports=b.createActions(a)},338:function(g,b,a){var k=(b=a(4))&&b.__esModule?b:{"default":b},e=(b=a(7))&&b.__esModule?b:{"default":b};b=a(9);var h=a(44),c=a(302);a=function(){function a(){(0,k.default)(this,a);this.templateInstallations={};this.bindListeners({handleLoadSuccess:c.LOAD_SUCCESS,handleLoadFailure:c.LOAD_FAILURE,
handleStaticInitialized:h.BOOTSTRAP,handlePreviewSet:c.SET_PREVIEW_INSTALLATION,handleTemplateSet:c.SET_LIVE_INSTALLATION,handleHomepageCollectionIdSet:c.SET_HOMEPAGE_COLLECTION_ID});this.exportPublicMethods({getHomepageCollectionId:this.getHomepageCollectionId})}(0,e.default)(a,[{key:"getHomepageCollectionId",value:function(){return this.getState().activeInstallation?this.getState().activeInstallation.homepageCollectionId:this.getState().homepageCollectionId}},{key:"handleStaticInitialized",value:function(a){var c=
a.authenticatedAccountWebsiteSettings;this.previewInstallationId=c?c.previewInstallationId:null;this.homepageCollectionId=a.homepageCollectionId;a.templateInstallation?(this.liveInstallationId=a.templateInstallation.id,this.templateInstallations[this.liveInstallationId]=a.templateInstallation):this.liveInstallationId=null;this.updateInstallationReferences()}},{key:"updateInstallationReferences",value:function(){this.liveInstallation=this.getTemplateInstallation(this.liveInstallationId);this.previewInstallation=
null;this.previewInstallationId!==this.liveInstallationId&&(this.previewInstallation=this.getTemplateInstallation(this.previewInstallationId));this.activeInstallation=this.previewInstallation||this.liveInstallation}},{key:"getTemplateInstallation",value:function(a){return!a||!this.templateInstallations[a]?null:this.templateInstallations[a]}},{key:"handleHomepageCollectionIdSet",value:function(a){a.error||(this.homepageCollectionId=a.homepageCollectionId,this.activeInstallation&&(this.activeInstallation.homepageCollectionId=
a.homepageCollectionId))}},{key:"handlePreviewSet",value:function(a){this.previewInstallationId=a;this.updateInstallationReferences()}},{key:"handleTemplateSet",value:function(a){this.liveInstallationId=a;this.previewInstallationId=null;this.updateInstallationReferences()}},{key:"handleLoadSuccess",value:function(a){var c={};a.forEach(function(a){this[a.id]=a},c);this.maintainMissingInstallation(c,this.liveInstallationId);this.maintainMissingInstallation(c,this.previewInstallationId);this.templateInstallations=
c;this.updateInstallationReferences()}},{key:"maintainMissingInstallation",value:function(a,c){c&&!a[c]&&(a[c]=this.templateInstallations[c])}},{key:"handleLoadFailure",value:function(){console.error("Unable to load installations")}}]);return a}();g.exports=b.createStore(a,"TemplateInstallationsStore")},352:function(g,b){g.exports=function(a,b){for(var e=-1,h=b.length,c=a.length;++e<h;)a[c+e]=b[e];return a}},434:function(g,b,a){function k(a){var c=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],
b=2>=arguments.length||void 0===arguments[2]?"":arguments[2];return d.getTemplateForSingleItem((0,e.default)({},c,{action:a})).replace("{id}",b)}var e=(b=a(13))&&b.__esModule?b:{"default":b},h=a(143),c=a(25),f=a(295),d=a(164),l=a(173);g.exports={read:function(a){var d=arguments[2];return(1>=arguments.length||void 0===arguments[1]?0:arguments[1])?c.get("/api/rest/global-content-items/"+a):c.get(k(l.GET,d,a))},readForCollection:function(a,b){var f=d.getTemplateForCollectionItems(b).replace("{collectionId}",
a);return c.get(f)},update:function(a,d){delete a.author;delete a.pendingPushedServices;delete a.pushedServices;return c.put(k(l.PUT,d,a.id),a)},updateForCollection:function(a,d){delete a.author;delete a.pendingPushedServices;delete a.pushedServices;return c.put(k(l.PUT,d,a.id),a)},create:function(a,d,b){return c.post(k(l.POST,b),a,d)},createForCollection:function(a,d,b){return c.post(k(l.POST,b),a,d)},updateField:function(a){a=f(a);return c.post("/api/commondata/SaveItemField",h.stringify(a))},"delete":function(a,
d){return c.delete(k(l.DELETE,d,a))},deleteMany:function(a){a=h.stringify({items:a});return c.post("/api/commondata/RemoveItems",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}},521:function(g,b){g.exports=function(a,b){for(var e=-1,h=a.length;++e<h;)if(!b(a[e],e,a))return!1;return!0}},522:function(g,b,a){var k=a(49);g.exports=function(a,b){var c=!0;k(a,function(a,d,e){return c=!!b(a,d,e)});return c}},523:function(g,b,a){var k=a(49);g.exports=function(a,b){var c;k(a,function(a,
d,e){c=b(a,d,e);return!c});return!!c}},524:function(g,b){YUI.add("model",function(a,b){function e(){e.superclass.constructor.apply(this,arguments)}var h=YUI.namespace("Env.Model"),c=a.Lang,f=a.Array,d=a.Object,l="error";a.Model=a.extend(e,a.Base,{idAttribute:"id",_allowAdHocAttrs:!0,_isYUIModel:!0,initializer:function(a){this.changed={};this.lastChange={};this.lists=[]},destroy:function(a,c){var d=this;"function"===typeof a&&(c=a,a=null);d.onceAfter("destroy",function(){function b(n){n||f.each(d.lists.concat(),
function(c){c.remove(d,a)});c&&c.apply(null,arguments)}a&&(a.remove||a["delete"])?d.sync("delete",a,b):b()});return e.superclass.destroy.call(d)},generateClientId:function(){h.lastId||(h.lastId=0);return this.constructor.NAME+"_"+(h.lastId+=1)},getAsHTML:function(d){d=this.get(d);return a.Escape.html(c.isValue(d)?String(d):"")},getAsURL:function(a){a=this.get(a);return encodeURIComponent(c.isValue(a)?String(a):"")},isModified:function(){return this.isNew()||!d.isEmpty(this.changed)},isNew:function(){return!c.isValue(this.get("id"))},
load:function(a,c){var d=this;"function"===typeof a&&(c=a,a={});a||(a={});d.sync("read",a,function(b,f){var e={options:a,response:f},t;b?(e.error=b,e.src="load",d.fire(l,e)):(d._loadEvent||(d._loadEvent=d.publish("load",{preventable:!1})),t=e.parsed=d._parse(f),d.setAttrs(t,a),d.changed={},d.fire("load",e));c&&c.apply(null,arguments)});return d},parse:function(c){if("string"===typeof c)try{return a.JSON.parse(c)}catch(d){return this.fire(l,{error:d,response:c,src:"parse"}),null}return c},save:function(a,
c){var d=this;"function"===typeof a&&(c=a,a={});a||(a={});d._validate(d.toJSON(),function(b){b?c&&c.call(null,b):d.sync(d.isNew()?"create":"update",a,function(b,f){var e={options:a,response:f},h;b?(e.error=b,e.src="save",d.fire(l,e)):(d._saveEvent||(d._saveEvent=d.publish("save",{preventable:!1})),f&&(h=e.parsed=d._parse(f),d.setAttrs(h,a)),d.changed={},d.fire("save",e));c&&c.apply(null,arguments)})});return d},set:function(a,c,d){var b={};b[a]=c;return this.setAttrs(b,d)},setAttrs:function(c,b){var f=
this.idAttribute,e,n,h,t;b=a.merge(b);t=b._transaction={};"id"!==f&&(c=a.merge(c),d.owns(c,f)?c.id=c[f]:d.owns(c,"id")&&(c[f]=c.id));for(n in c)d.owns(c,n)&&this._setAttr(n,c[n],b);if(!d.isEmpty(t)){f=this.changed;h=this.lastChange={};for(n in t)d.owns(t,n)&&(e=t[n],f[n]=e.newVal,h[n]={newVal:e.newVal,prevVal:e.prevVal,src:e.src||null});b.silent||(this._changeEvent||(this._changeEvent=this.publish("change",{preventable:!1})),b.changed=h,this.fire("change",b))}return this},sync:function(){var a=f(arguments,
0,!0).pop();"function"===typeof a&&a()},toJSON:function(){var a=this.getAttrs();delete a.clientId;delete a.destroyed;delete a.initialized;"id"!==this.idAttribute&&delete a.id;return a},undo:function(a,c){var b=this.lastChange,e=this.idAttribute,n={},h;a||(a=d.keys(b));f.each(a,function(a){d.owns(b,a)&&(a=a===e?"id":a,h=!0,n[a]=b[a].prevVal)});return h?this.setAttrs(n,c):this},validate:function(a,c){c&&c()},addAttr:function(a,d,b){var f=this.idAttribute,n;f&&a===f&&(f=this._isLazyAttr("id")||this._getAttrCfg("id"),
n=d.value===d.defaultValue?null:d.value,c.isValue(n)||(n=f.value===f.defaultValue?null:f.value,c.isValue(n)||(n=c.isValue(d.defaultValue)?d.defaultValue:f.defaultValue)),d.value=n,f.value!==n&&(f.value=n,this._isLazyAttr("id")?this._state.add("id","lazy",f):this._state.add("id","value",n)));return e.superclass.addAttr.apply(this,arguments)},_parse:function(a){return this.parse(a)},_validate:function(a,d){function b(e){c.isValue(e)?(f.fire(l,{attributes:a,error:e,src:"validate"}),d(e)):d()}var f=this;
1===f.validate.length?b(f.validate(a,b)):f.validate(a,b)},_setAttrVal:function(a,c,d,b,f,h){var t=e.superclass._setAttrVal.apply(this,arguments),l=f&&f._transaction,k=h&&h.initializing;t&&(l&&!k)&&(l[a]={newVal:this.get(a),prevVal:d,src:f.src||null});return t}},{NAME:"model",ATTRS:{clientId:{valueFn:"generateClientId",readOnly:!0},id:{value:null}}})},"3.17.2",{requires:["base-build","escape","json-parse"]})},527:function(g,b){g.exports={ENABLED:1,DISABLED:2}},531:function(g,b){function a(a){this.dispatcher=
a.dispatcher;this.listeners={}}Object.defineProperty(b,"__esModule",{value:!0});a.prototype.addActionListener=function(a,b){var h=this.dispatcher.register(function(c){a===c.action&&b(c.data,c.details)});this.listeners[h]=!0;return h};a.prototype.removeActionListener=function(a){delete this.listeners[a];this.dispatcher.unregister(a)};a.prototype.removeAllActionListeners=function(){Object.keys(this.listeners).forEach(this.removeActionListener.bind(this));this.listeners={}};b["default"]=a;g.exports=
b["default"]},536:function(g,b,a){function k(a){return a&&a.__esModule?a:{"default":a}}b=a(46);var e=k(b);b=a(4);var h=k(b);b=a(7);var c=k(b);b=a(51);var f=k(b);b=a(158);var d=k(b);b=a(50);var l=k(b);b=a(19);b=k(b);var m=a(26),r=m.Record,s=m.Set,q=m.Map,n=a(76),u=a(537);a={allowSquarespacePromotion:!0,amazonAssociateTag:void 0,announcementBarSettings:q(),assetPurchasesByNonAdminsAllowed:!0,businessHours:q(),collectionTitleFormat:void 0,commentAnonAllowed:void 0,commentApprovalRequired:void 0,commentAvatarsOn:void 0,
commentDisableAfterDaysDefault:0,commentEnableByDefault:void 0,commentFlagThreshold:0,commentFlagsAllowed:void 0,commentLikesAllowed:void 0,commentSortType:void 0,commentThreaded:void 0,commentsEnabled:!0,configurationMenuItems:void 0,contactEmail:void 0,contactPhoneNumber:void 0,country:void 0,defaultPostFormat:void 0,disqusShortname:"",homepageTitleFormat:void 0,hours:void 0,id:void 0,itemTitleFormat:void 0,lastAgreedTermsOfService:void 0,markdownMode:void 0,mobileInfoBarSettings:q(),notFoundPageId:null,
ownerId:void 0,pinterestOverlayOptions:q(),simpleLikingEnabled:void 0,socialAccountDisplayOrder:void 0,ssBadgeDevices:void 0,ssBadgePosition:void 0,ssBadgeType:void 0,ssBadgeVisibility:void 0,state:void 0,storeSettings:void 0,subjects:void 0,tutorialsCompleted:s(),type:void 0,contentDescription:q(),goals:q(),useDeviceView:!0,useEscapeKeyToLogin:!0,websiteId:void 0};var t=(0,b.default)(a);g.exports=function(a){function b(){var a=0>=arguments.length||void 0===arguments[0]?{}:arguments[0];(0,h.default)(this,
b);return(0,f.default)(this,(0,e.default)(b).call(this,m.fromJS(u(a))))}(0,l.default)(b,a);(0,c.default)(b,[{key:"merge",value:function(a){a=a instanceof r?a:n(u(a),t);return(0,d.default)((0,e.default)(b.prototype),"merge",this).call(this,a)}},{key:"serializeToModel",value:function(){var a=this.toJS(),c=a.tutorialsCompleted;null===a.notFoundPageId&&(a.notFoundPageId="system-default");c&&(a.tutorialsCompleted=c.reduce(function(a,c){a[c]=!0;return a},{}));return a}}]);return b}(r(a))},537:function(g,
b,a){var k=(b=a(19))&&b.__esModule?b:{"default":b},e=(b=a(16))&&b.__esModule?b:{"default":b},h=a(26).Set;g.exports=function(a){var b=a.notFoundPageId,d=a.tutorialsCompleted;a=(0,e.default)({},a);d&&(a.tutorialsCompleted=h((0,k.default)(d)));"system-default"===b&&(a.notFoundPageId=null);return a}},583:function(g,b,a){function k(a){return a&&a.__esModule?a:{"default":a}}b=a(29);var e=k(b);b=a(4);var h=k(b);b=a(7);var c=k(b),f=a(777);a=a(9);b=function(){function a(){(0,h.default)(this,a);this.generateActions("insert",
"insertMany","deleteSuccess","deleteFailure")}(0,c.default)(a,[{key:"create",value:function(a){var c=this;this.dispatch(a);return f.create(a).then(function(a){a=a.data;c.actions.insert(a);return a.id})}},{key:"read",value:function(a){var c=this;this.dispatch(a);return f.read(a).then(function(a){return c.actions.insert(a.data)})}},{key:"readAll",value:function(){var a=this;return f.readAll().then(function(c){return a.actions.insertMany(c.data)}).catch(function(a){return e.default.reject(a.data.message)})}},
{key:"delete",value:function(a){var c=this;this.dispatch(a);return f.delete(a).then(function(d){c.actions.deleteSuccess(a);return d},function(d){d=d.data;c.actions.deleteFailure(a,d);return e.default.reject(d.message)})}},{key:"deleteUnusedCollectionPermanently",value:function(a){var c=this;this.dispatch(a);return f.deleteUnusedPageCollectionPermanently(a).then(function(d){c.actions.deleteSuccess(a);return d},function(d){d=d.data;c.actions.deleteFailure(a,d);return e.default.reject(d.message)})}},
{key:"update",value:function(a){var c=this;return a.id&&!a.urlId?f.generateUrl(a).then(function(d){a.urlId=d.data.urlId;return f.create(a).then(function(a){c.actions.insert(a.data);return a.data})}).catch(function(a){return e.default.reject(a.data.message)}):f.create(a).then(function(a){a=a.data;c.actions.insert(a);return a})}}]);return a}();g.exports=a.createActions(b)},584:function(g,b,a){var k=(b=a(4))&&b.__esModule?b:{"default":b},e=(b=a(7))&&b.__esModule?b:{"default":b};a=a(9);b=function(){function a(){(0,
k.default)(this,a);this.generateActions("refresh","setUrl","removeLoadHandler","disableEditing","enableEditing")}(0,e.default)(a,[{key:"addLoadHandler",value:function(a,b){this.dispatch({key:a,callback:b})}}]);return a}();g.exports=a.createActions(b)},604:function(g,b){YUI.add("squarespace-model-sync-rest",function(a){function b(){this._ioConfigCache={}}b.prototype={sync:function(b,h,c){a.Lang.isValue(h.timeout)||(h.timeout=1E7);a.ModelSync.REST.prototype.sync.apply(this,arguments)},_storeRequest:function(b,
h){this._ioConfigCache[b.id]=a.merge(h,{})},_retrieveAndEvict:function(a){var b=this._ioConfigCache[a];this._ioConfigCache[a]=null;return b},_isCrumbFailure:function(a){return a&&a.crumbFail&&a.crumb},_sendSyncIORequest:function(b){var h=a.ModelSync.REST.prototype._sendSyncIORequest.apply(this,arguments);this._storeRequest(h,b);return h},_onSyncIOEnd:function(b,h){this._retrieveAndEvict(b);a.ModelSync.REST.prototype._onSyncIOEnd.apply(this,arguments)},_onSyncIOSuccess:function(b,h,c){var f=this._retrieveAndEvict(b),
d={},l=h.responseText;a.Lang.isValue(l)&&l.trim()&&(d=a.JSON.parse(l));this._isCrumbFailure(d)?(d=d.crumb,a.ModelSync.REST.CSRF_TOKEN=d,a.Env.CSRF_TOKEN=d,f.headers["X-CSRF-Token"]=d,this._sendSyncIORequest(f)):a.ModelSync.REST.prototype._onSyncIOSuccess.apply(this,arguments)},_onSyncIOFailure:function(b,h,c){if(b=c.callback){c={};var f=h.responseText;a.Lang.isValue(f)&&f.trim()&&(c=a.JSON.parse(f));b({code:h.status,msg:h.statusText,responseJSON:c},h)}}};a.mix(b,a.ModelSync.REST,!1,null,1);a.namespace("Squarespace.ModelSync").REST=
b},"1.0",{requires:["model-sync-rest"]})},605:function(g,b){YUI.add("model-list",function(a,b){function e(){e.superclass.constructor.apply(this,arguments)}var h=a.Attribute.prototype,c=a.Lang,f=a.Array;a.ModelList=a.extend(e,a.Base,{model:a.Model,_isYUIModelList:!0,initializer:function(c){c||(c={});var b=this.model=c.model||this.model;"string"===typeof b&&((this.model=a.Object.getValue(a,b.split(".")))||a.error("ModelList: Model class not found: "+b));this.publish("add",{defaultFn:this._defAddFn});
this.publish("reset",{defaultFn:this._defResetFn});this.publish("remove",{defaultFn:this._defRemoveFn});this.after("*:idChange",this._afterIdChange);this._clear();c.items&&this.add(c.items,{silent:!0})},destructor:function(){this._clear()},add:function(d,b){var e=d._isYUIModelList;return e||c.isArray(d)?f.map(e?d.toArray():d,function(c,d){var f=b||{};"index"in f&&(f=a.merge(f,{index:f.index+d}));return this._add(c,f)},this):this._add(d,b)},create:function(c,b,f){var e=this;"function"===typeof b&&
(f=b,b={});b||(b={});c._isYUIModel||(c=new this.model(c));e.fire("create",a.merge(b,{model:c}));return c.save(b,function(a){a||e.add(c,b);f&&f.apply(null,arguments)})},each:function(a,c){var b=this._items.concat(),f,e,h;f=0;for(h=b.length;f<h;f++)e=b[f],a.call(c||e,e,f,this);return this},filter:function(a,c){var b=[],f=this._items,e,h,n;"function"===typeof a&&(c=a,a={});e=0;for(n=f.length;e<n;++e)h=f[e],c.call(this,h,e,this)&&b.push(h);return a.asList?(f=new this.constructor({model:this.model}),b.length&&
f.add(b,{silent:!0}),f):b},get:function(a){return this.attrAdded(a)?h.get.apply(this,arguments):this.invoke("get",a)},getAsHTML:function(c){return this.attrAdded(c)?a.Escape.html(h.get.apply(this,arguments)):this.invoke("getAsHTML",c)},getAsURL:function(a){return this.attrAdded(a)?encodeURIComponent(h.get.apply(this,arguments)):this.invoke("getAsURL",a)},getByClientId:function(a){return this._clientIdMap[a]||null},getById:function(a){return this._idMap[a]||null},invoke:function(a){var c=[this._items,
a].concat(f(arguments,1,!0));return f.invoke.apply(f,c)},load:function(a,c){var b=this;"function"===typeof a&&(c=a,a={});a||(a={});this.sync("read",a,function(f,e){var h={options:a,response:e},n;f?(h.error=f,h.src="load",b.fire("error",h)):(b._loadEvent||(b._loadEvent=b.publish("load",{preventable:!1})),n=h.parsed=b._parse(e),b.reset(n,a),b.fire("load",h));c&&c.apply(null,arguments)});return this},map:function(a,c){return f.map(this._items,a,c)},parse:function(c){if("string"===typeof c)try{return a.JSON.parse(c)||
[]}catch(b){return this.fire("error",{error:b,response:c,src:"parse"}),null}return c||[]},remove:function(a,b){var e=a._isYUIModelList;return e||c.isArray(a)?(a=f.map(e?a.toArray():a,function(a){return c.isNumber(a)?this.item(a):a},this),f.map(a,function(a){return this._remove(a,b)},this)):this._remove(a,b)},reset:function(c,b){c||(c=[]);b||(b={});var e=a.merge({src:"reset"},b);c=c._isYUIModelList?c.toArray():f.map(c,function(a){return a._isYUIModel?a:new this.model(a)},this);e.models=c;b.silent?
this._defResetFn(e):(this.comparator&&c.sort(a.bind(this._sort,this)),this.fire("reset",e));return this},some:function(a,c){var b=this._items.concat(),f,e,h;f=0;for(h=b.length;f<h;f++)if(e=b[f],a.call(c||e,e,f,this))return!0;return!1},sort:function(c){if(!this.comparator)return this;var b=this._items.concat();c||(c={});b.sort(a.rbind(this._sort,this,c));b=a.merge(c,{models:b,src:"sort"});c.silent?this._defResetFn(b):this.fire("reset",b);return this},sync:function(){var a=f(arguments,0,!0).pop();"function"===
typeof a&&a()},toArray:function(){return this._items.concat()},toJSON:function(){return this.map(function(a){return a.toJSON()})},_add:function(b,f){var e;f||(f={});b._isYUIModel||(b=new this.model(b));e=b.get("id");if(this._clientIdMap[b.get("clientId")]||c.isValue(e)&&this._idMap[e])this.fire("error",{error:"Model is already in the list.",model:b,src:"add"});else return e=a.merge(f,{index:"index"in f?f.index:this._findIndex(b),model:b}),f.silent?this._defAddFn(e):this.fire("add",e),b},_attachList:function(a){a.lists.push(this);
a.addTarget(this)},_clear:function(){f.each(this._items,this._detachList,this);this._clientIdMap={};this._idMap={};this._items=[]},_compare:function(a,c){return a<c?-1:a>c?1:0},_detachList:function(a){var c=f.indexOf(a.lists,this);-1<c&&(a.lists.splice(c,1),a.removeTarget(this))},_findIndex:function(a){var c=this._items,b=c.length,f=0,e,h;if(!this.comparator||!b)return b;for(h=this.comparator(a);f<b;)e=f+b>>1,a=c[e],0>this._compare(this.comparator(a),h)?f=e+1:b=e;return f},_parse:function(a){return this.parse(a)},
_remove:function(b,f){var e;f||(f={});c.isNumber(b)?(e=b,b=this.item(e)):e=this.indexOf(b);if(-1===e||!b)this.fire("error",{error:"Model is not in the list.",index:e,model:b,src:"remove"});else return e=a.merge(f,{index:e,model:b}),f.silent?this._defRemoveFn(e):this.fire("remove",e),b},_sort:function(a,c,b){a=this._compare(this.comparator(a),this.comparator(c));return 0===a?a:b&&b.descending?-a:a},_afterIdChange:function(a){var b=a.newVal,f=a.prevVal;a=a.target;if(c.isValue(f))if(this._idMap[f]===
a)delete this._idMap[f];else return;else if(-1===this.indexOf(a))return;c.isValue(b)&&(this._idMap[b]=a)},_defAddFn:function(a){var b=a.model,f=b.get("id");this._clientIdMap[b.get("clientId")]=b;c.isValue(f)&&(this._idMap[f]=b);this._attachList(b);this._items.splice(a.index,0,b)},_defRemoveFn:function(a){var b=a.model,f=b.get("id");this._detachList(b);delete this._clientIdMap[b.get("clientId")];c.isValue(f)&&delete this._idMap[f];this._items.splice(a.index,1)},_defResetFn:function(a){"sort"===a.src?
this._items=a.models.concat():(this._clear(),a.models.length&&this.add(a.models,{silent:!0}))}},{NAME:"modelList"});a.augment(e,a.ArrayList)},"3.17.2",{requires:"array-extras array-invoke arraylist base-build escape json-parse model".split(" ")})},606:function(g,b){YUI.add("model-sync-rest",function(a,b){function e(){}var h=a.Lang;e.CSRF_TOKEN=YUI.Env.CSRF_TOKEN;e.EMULATE_HTTP=!1;e.HTTP_HEADERS={Accept:"application/json","Content-Type":"application/json"};e.HTTP_METHODS={create:"POST",read:"GET",
update:"PUT","delete":"DELETE"};e.HTTP_TIMEOUT=3E4;e._NON_ATTRS_CFG=["root","url"];e.prototype={root:"",url:"",initializer:function(a){a||(a={});"root"in a&&(this.root=a.root||"");"url"in a&&(this.url=a.url||"")},getURL:function(c,b){var d=this.root,e=this.url;return this._isYUIModelList?!e?this.model.prototype.root:this._substituteURL(e,a.merge(this.getAttrs(),b)):d&&("create"===c||this.isNew())?d:!e?this._joinURL(this.getAsURL("id")||""):this._substituteURL(e,a.merge(this.getAttrs(),b))},parseIOResponse:function(a){return a.responseText},
serialize:function(c){return a.JSON.stringify(this)},sync:function(c,b,d){b||(b={});var h=this.getURL(c,b),k=e.HTTP_METHODS[c],g=a.merge(e.HTTP_HEADERS,b.headers),s=b.timeout||e.HTTP_TIMEOUT;b=b.csrfToken||e.CSRF_TOKEN;var q;"POST"===k||"PUT"===k?q=this.serialize(c):delete g["Content-Type"];if(e.EMULATE_HTTP&&("PUT"===k||"DELETE"===k))g["X-HTTP-Method-Override"]=k,k="POST";if(b&&("POST"===k||"PUT"===k||"DELETE"===k))g["X-CSRF-Token"]=b;this._sendSyncIORequest({action:c,callback:d,entity:q,headers:g,
method:k,timeout:s,url:h})},_joinURL:function(a){var b=this.root;if(!b&&!a)return"";"/"===a.charAt(0)&&(a=a.substring(1));return b&&"/"===b.charAt(b.length-1)?b+a+"/":b+"/"+a},_parse:function(a){"function"===typeof this.parseIOResponse&&(a=this.parseIOResponse(a));return this.parse(a)},_sendSyncIORequest:function(b){return a.io(b.url,{arguments:{action:b.action,callback:b.callback,url:b.url},context:this,data:b.entity,headers:b.headers,method:b.method,timeout:b.timeout,on:{start:this._onSyncIOStart,
failure:this._onSyncIOFailure,success:this._onSyncIOSuccess,end:this._onSyncIOEnd}})},_substituteURL:function(b,f){if(!b)return"";var d={};a.Object.each(f,function(a,b){if(h.isString(a)||h.isNumber(a))d[b]=encodeURIComponent(a)});return h.sub(b,d)},_onSyncIOEnd:function(a,b){},_onSyncIOFailure:function(a,b,d){(a=d.callback)&&a({code:b.status,msg:b.statusText},b)},_onSyncIOSuccess:function(a,b,d){(a=d.callback)&&a(null,b)},_onSyncIOStart:function(a,b){}};a.namespace("ModelSync").REST=e},"3.17.2",{requires:["model",
"io-base","json-stringify"]})},607:function(g,b,a){var k=(b=a(4))&&b.__esModule?b:{"default":b},e=(b=a(7))&&b.__esModule?b:{"default":b};a=a(9);b=function(){function a(){(0,k.default)(this,a);this.generateActions("reset")}(0,e.default)(a,[{key:"updateAttributes",value:function(a,b){a&&this.dispatch({itemId:a,attrs:b})}}]);return a}();g.exports=a.createActions(b)},766:function(g,b,a){var k=a(25);g.exports={save:function(a,b){return k.put("/api/member-website-settings/"+a,b)},commerceUpsellShown:function(a){return k.post("/api/member-website-settings/"+
a+"/commerce-upsell-shown")}}},776:function(g,b,a){var k=(b=a(4))&&b.__esModule?b:{"default":b},e=(b=a(7))&&b.__esModule?b:{"default":b};b=a(26);var h=b.Map,c=b.fromJS;b=a(9);var f=a(52),d=a(44),l=a(291);a=function(){function a(){(0,k.default)(this,a);this.state=h();this.bindListeners({onSiteLayoutReset:[d.bootstrap,l.loadTemplate]});this.exportPublicMethods({getCollectionLinks:this.getCollectionLinks})}(0,e.default)(a,[{key:"onSiteLayoutReset",value:function(a){a=a.siteLayout;if(!a)return!1;var b=
h();a.forEach(function(a){b=b.set(a.identifier,c(a))});this.setState(b)}},{key:"getCollectionLinks",value:function(){return this.state.reduce(function(a,b){var c=b.toJS().links;a.push(c.filter(function(a){return!!a.collectionId}));return a},[])}}]);return a}();g.exports=b.createStore(f(a),"SiteNavigationStore")},777:function(g,b,a){var k=a(143),e=a(25),h=a(295),c=a(1116);g.exports={generateUrl:function(a){if(a.id){var b=3>a.title.length?a.typeName+"-"+a.title:a.title,b=c(b);return e.post("/api/content-collections/"+
a.id+"/generate-url",{title:a.title,urlId:b})}},create:function(a){a=h(a);a=k.stringify(a);return e.post("/api/commondata/SaveCollection",a,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},read:function(a){return e.get("/api/commondata/GetCollection",{params:{collectionId:a}})},readAll:function(){return e.get("/api/commondata/GetCollections")},"delete":function(a){return e.post("/api/commondata/RemoveCollection",k.stringify({collectionId:a}))},deleteUnusedPageCollectionPermanently:function(a){return e.post("/api/commondata/unused-start-page-collection",
k.stringify({collectionId:a}))}}},791:function(g,b,a){b=a(9);a=new (a(531))(b);g.exports=a},916:function(g,b){YUI.add("datatype-date-format",function(a,b){var e=function(a,b,d){"undefined"===typeof d&&(d=10);for(b+="";parseInt(a,10)<d&&1<d;d/=10)a=b+a;return a.toString()},h={formats:{a:function(a,b){return b.a[a.getDay()]},A:function(a,b){return b.A[a.getDay()]},b:function(a,b){return b.b[a.getMonth()]},B:function(a,b){return b.B[a.getMonth()]},C:function(a){return e(parseInt(a.getFullYear()/100,
10),0)},d:["getDate","0"],e:["getDate"," "],g:function(a){return e(parseInt(h.formats.G(a)%100,10),0)},G:function(a){var b=a.getFullYear(),d=parseInt(h.formats.V(a),10);a=parseInt(h.formats.W(a),10);a>d?b++:0===a&&52<=d&&b--;return b},H:["getHours","0"],I:function(a){a=a.getHours()%12;return e(0===a?12:a,0)},j:function(a){var b=new Date(""+a.getFullYear()+"/1/1 GMT");a=new Date(""+a.getFullYear()+"/"+(a.getMonth()+1)+"/"+a.getDate()+" GMT")-b;a=parseInt(a/6E4/60/24,10)+1;return e(a,0,100)},k:["getHours",
" "],l:function(a){a=a.getHours()%12;return e(0===a?12:a," ")},m:function(a){return e(a.getMonth()+1,0)},M:["getMinutes","0"],p:function(a,b){return b.p[12<=a.getHours()?1:0]},P:function(a,b){return b.P[12<=a.getHours()?1:0]},s:function(a,b){return parseInt(a.getTime()/1E3,10)},S:["getSeconds","0"],u:function(a){a=a.getDay();return 0===a?7:a},U:function(a){var b=parseInt(h.formats.j(a),10);a=6-a.getDay();b=parseInt((b+a)/7,10);return e(b,0)},V:function(a){var b=parseInt(h.formats.W(a),10),d=(new Date(""+
a.getFullYear()+"/1/1")).getDay(),b=b+(4<d||1>=d?0:1);53===b&&4>(new Date(""+a.getFullYear()+"/12/31")).getDay()?b=1:0===b&&(b=h.formats.V(new Date(""+(a.getFullYear()-1)+"/12/31")));return e(b,0)},w:"getDay",W:function(a){var b=parseInt(h.formats.j(a),10);a=7-h.formats.u(a);b=parseInt((b+a)/7,10);return e(b,0,10)},y:function(a){return e(a.getFullYear()%100,0)},Y:"getFullYear",z:function(a){a=a.getTimezoneOffset();var b=e(parseInt(Math.abs(a/60),10),0),d=e(Math.abs(a%60),0);return(0<a?"-":"+")+b+
d},Z:function(a){var b=a.toString().replace(/^.*:\d\d( GMT[+-]\d+)? \(?([A-Za-z ]+)\)?\d*$/,"$2").replace(/[a-z ]/g,"");4<b.length&&(b=h.formats.z(a));return b},"%":function(a){return"%"}},aggregates:{c:"locale",D:"%m/%d/%y",F:"%Y-%m-%d",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"\t",T:"%H:%M:%S",x:"locale",X:"locale"},format:function(b,f){f=f||{};if(!a.Lang.isDate(b))return a.Lang.isValue(b)?b:"";var d,k;d=f.format||"%Y-%m-%d";k=a.Intl.get("datatype-date-format");for(var g=function(a,b){var c=h.aggregates[b];
return"locale"===c?k[b]:c},r=function(d,f){var n=h.formats[f];switch(a.Lang.type(n)){case "string":return b[n]();case "function":return n.call(b,b,k);case "array":if("string"===a.Lang.type(n[0]))return e(b[n[0]](),n[1]);default:return f}};d.match(/%[cDFhnrRtTxX]/);)d=d.replace(/%([cDFhnrRtTxX])/g,g);d=d.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g,r);g=r=void 0;return d}};a.mix(a.namespace("Date"),h);a.namespace("DataType");a.DataType.Date=a.Date},"3.17.2",{lang:"ar ar-JO ca ca-ES da da-DK de de-AT de-DE el el-GR en en-AU en-CA en-GB en-IE en-IN en-JO en-MY en-NZ en-PH en-SG en-US es es-AR es-BO es-CL es-CO es-EC es-ES es-MX es-PE es-PY es-US es-UY es-VE fi fi-FI fr fr-BE fr-CA fr-FR hi hi-IN hu id id-ID it it-IT ja ja-JP ko ko-KR ms ms-MY nb nb-NO nl nl-BE nl-NL pl pl-PL pt pt-BR ro ro-RO ru ru-RU sv sv-SE th th-TH tr tr-TR vi vi-VN zh-Hans zh-Hans-CN zh-Hant zh-Hant-HK zh-Hant-TW".split(" ")})},
917:function(g,b,a){var k=(b=a(4))&&b.__esModule?b:{"default":b},e=(b=a(7))&&b.__esModule?b:{"default":b};b=a(9);var h=a(766);a=function(){function a(){(0,k.default)(this,a);this.generateActions("saveSuccess")}(0,e.default)(a,[{key:"save",value:function(a,b){var c=this;this.dispatch();return h.save(a,b).then(function(a){c.actions.saveSuccess(a)})}}]);return a}();g.exports=b.createActions(a)},946:function(g,b,a){function k(a){return a&&a.__esModule?a:{"default":a}}b=a(29);var e=k(b);b=a(4);var h=k(b);
b=a(7);var c=k(b);b=a(26);var f=b.Map,d=b.fromJS;b=a(9);var l=a(583);a=a(52);var m=function(){function a(){(0,h.default)(this,a);this.state=f();this.bindListeners({onInsert:l.insert,onInsertMany:l.insertMany,onDelete:[l.delete,l.deleteUnusedCollectionPermanently]});this.exportPublicMethods({fetch:this.fetch,fetchFromServer:this.fetchFromServer})}(0,c.default)(a,[{key:"onInsert",value:function(a){this.setState(this.state.set(a.id,d(a)))}},{key:"onInsertMany",value:function(a){var b=this.state;a.forEach(function(a){return b=
b.set(a.id,d(a))});this.setState(b)}},{key:"onDelete",value:function(a){this.setState(this.state.delete(a))}},{key:"fetch",value:function(a){var b=this.getState().get(a);return b?e.default.resolve(b):this.fetchFromServer(a)}},{key:"fetchFromServer",value:function(a){var b=this;return l.read(a).then(function(){return b.getState().get(a)})}}]);return a}();g.exports=b.createStore(a(m),"ContentCollectionStore")},963:function(g,b,a){var k=a(25);g.exports={getTemplate:function(a){return k.get("/api/templates/"+
a)}}},964:function(g,b,a){var k=a(25),e=a(143);g.exports={loadTemplateInstallations:function(){return k.get("/api/template-installations")},setLiveInstallation:function(a){return k.post("/api/template/SetTemplate",e.stringify({installationId:a}))},updateInstallation:function(a){return k.put("/api/template-installations/"+a.id,a)},setHomepageCollectionId:function(a){return k.post("/api/template/SetHomepageCollection",e.stringify({collectionId:a}))}}},1015:function(g,b,a){var k=a(285),e=a(74);YUI.add("squarespace-util-authenticated",
function(a){a.namespace("Squarespace");a.Squarespace.UtilAuthenticated={userHasAccessPermission:function(a){return k.hasPermission(a)},isSquarespaceAdmin:function(){return k.isAdmin()},isBetaFeatureEnabled:function(a){return e.isFeatureEnabled(a)}}},"1.0",{requires:["squarespace-util"]})},1016:function(g,b){YUI.add("datatype-date-math",function(a,b){var e=a.Lang;a.mix(a.namespace("Date"),{isValidDate:function(a){return e.isDate(a)&&isFinite(a)&&"Invalid Date"!=a&&!isNaN(a)&&null!=a?!0:!1},areEqual:function(a,
b){return this.isValidDate(a)&&this.isValidDate(b)&&a.getTime()==b.getTime()},isGreater:function(a,b){return this.isValidDate(a)&&this.isValidDate(b)&&a.getTime()>b.getTime()},isGreaterOrEqual:function(a,b){return this.isValidDate(a)&&this.isValidDate(b)&&a.getTime()>=b.getTime()},isInRange:function(a,b,e){return this.isGreaterOrEqual(a,b)&&this.isGreaterOrEqual(e,a)},addDays:function(a,b){return new Date(a.getTime()+864E5*b)},addMonths:function(a,b){var e=a.getFullYear(),d=a.getMonth()+b,e=Math.floor(e+
d/12),d=(d%12+12)%12,k=new Date(a.getTime());k.setFullYear(e);k.setMonth(d);return k},addYears:function(a,b){var e=a.getFullYear()+b,d=new Date(a.getTime());d.setFullYear(e);return d},listOfDatesInMonth:function(a){if(!this.isValidDate(a))return[];var b=this.daysInMonth(a),e=a.getFullYear();a=a.getMonth();for(var d=[],k=1;k<=b;k++)d.push(new Date(e,a,k,12,0,0));return d},daysInMonth:function(a){if(!this.isValidDate(a))return 0;var b=a.getMonth(),e=[31,28,31,30,31,30,31,31,30,31,30,31];if(1!=b)return e[b];
a=a.getFullYear();return 0===a%400?29:0===a%100?28:0===a%4?29:28}});a.namespace("DataType");a.DataType.Date=a.Date},"3.17.2",{requires:["yui-base"]})},1017:function(g,b){YUI.add("datatype-date-parse",function(a,b){a.mix(a.namespace("Date"),{parse:function(b){b=new Date(+b||b);return a.Lang.isDate(b)?b:null}});a.namespace("Parsers").date=a.Date.parse;a.namespace("DataType");a.DataType.Date=a.Date},"3.17.2")},1051:function(g,b,a){b=a(163);var k=a(36);a=a(1056);g.exports={DEFAULT_COLLECTION_CONFIGURATIONS:{page:{collectionType:k.COLLECTION_TYPE_PAGE,
typeName:"page",title:"Page",ordering:b.CUSTOM,icon:"page",addText:"Add Block"},"gallery-block":{collectionType:k.GALLERY_BLOCK,typeName:"gallery-block",title:"Gallery Block",ordering:b.USER,acceptTypes:["image","video"]},products:{collectionType:k.PRODUCTS,typeName:"products",title:"Products",pageSize:20,ordering:b.USER,acceptTypes:["store_item"],view:a.PRODUCT_TABLE,icon:"products",addText:"Add Product"},"template-page":{collectionType:k.TEMPLATE_PAGE,title:"Template Page",icon:"projects"},"splash-page":{collectionType:k.SPLASH_PAGE,
typeName:"splash-page",title:"Cover Page",ordering:b.CUSTOM,icon:"splash-page"},subscription:{collectionType:k.COLLECTION_TYPE_SUBSCRIPTION,typeName:"subscription",title:"Subscription",ordering:b.CHRONOLOGICAL}},DEFAULT_COLLECTION_CONFIGURATION:{collectionType:k.COLLECTION_TYPE_GENERIC,supported:!0,supportsVideoBackgrounds:!1},DEFAULT_TEMPLATE_PAGE_CONFIGURATION:{icon:"template-page",collectionType:k.TEMPLATE_PAGE,supported:!0,folder:!1,supportsVideoBackgrounds:!1}}},1056:function(g,b){g.exports=
{LIST:"list",GRID:"grid",PRODUCT:"product"}},1113:function(g,b,a){var k=(b=a(4))&&b.__esModule?b:{"default":b},e=(b=a(7))&&b.__esModule?b:{"default":b},h=a(26);b=a(9);var c=a(607),f=a(140),d=a(157);a=a(52);var l=h.Map,m=function(){function a(){(0,k.default)(this,a);this.state=l();this.bindListeners({onUpdateAttributes:c.updateAttributes,unstageChanges:[f.insert,f.delete,c.reset]});this.exportPublicMethods({fetchStaged:this.fetchStaged,getItemDirtyState:this.getItemDirtyState,getItemState:this.getItemState,
unstageChanges:this.unstageChanges})}(0,e.default)(a,[{key:"onUpdateAttributes",value:function(a){var b=h.fromJS(a.attrs),c=this.state.get(a.itemId);c&&(b=c.merge(a.attrs));this.setState(this.state.set(a.itemId,b))}},{key:"unstageChanges",value:function(a){a&&a.id&&this.setState(this.state.delete(a.id))}},{key:"getItemState",value:function(a){if(a=this.state.get(a))return a.toJS()}},{key:"getItemDirtyState",value:function(a){return!!this.state.get(a)}},{key:"fetchStaged",value:function(a,b){var c=
this.state.get(a);return d.fetch(a,!1,b).then(function(a){return c?a.merge(c.toJS()):a})}}]);return a}();g.exports=b.createStore(a(m),"YUIStagedContentItemStore")},1116:function(g,b){g.exports=function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"").toLowerCase().replace(/[^a-z0-9_\s]+/g,"").replace(/[\s]+/g,"-")}},1146:function(g,b,a){var k=a(99),e=a(36),h=a(568);YUI.add("squarespace-content-collection-utils",function(a){a.namespace("Squarespace").ContentCollectionUtils={groupCollectionsByTypeName:function(b){for(var d=
{},e=0;e<b.length;e++){var h=b[e];if(!h.get("isDemoCollection")){h=h.get("typeName");if(!d[h]){var g=k.getState().collectionConfigs[h];d[h]={title:g?g.title:"Unknown",collections:[]}}d[h].collections.push(b[e])}}return a.Object.values(d)},getIconClassNames:function(a){var b=a.getTemplateConfiguration(),c="";b&&b.get("supported")&&(c=b.get("icon"));""===c&&(b&&b.get("collectionType")===e.TEMPLATE_PAGE)&&(c="template-page");""===c&&(c=a.get("typeName"));return c},filterCollections:function(b,d){var k=
["collectionType","ordering","folder","index"];return a.Squarespace.ContentCollectionCache.filter(function(h){if(a.Lang.isArray(d)&&-1!==d.indexOf(h.get("id"))||h.get("isDemoCollection")&&h.get("type")!==e.TEMPLATE_PAGE)return!1;var g=!0,s=h.getTemplateConfiguration(),q;for(q in b)if(g=b[q],a.Lang.isArray(g)||(g=[g]),g=a.Array.some(g,function(b,d){var e;e=q;e=-1!==k.indexOf(e)?a.Lang.isValue(s)&&s.get(e)===b:h.get(e)===b;return e}),!g)break;return g})},getCollectionFilter:function(a,b){return a===
e.PRODUCTS?{collectionType:a}:{collectionType:a,ordering:b}},isTemplatePage:function(a){return a.get("type")===e.TEMPLATE_PAGE},isIndex:function(a){return(a=a.getTemplateConfiguration())&&a.get("folderBehavior")==h.INDEX?!0:!1},isFolder:function(a){return(a=a.getTemplateConfiguration())&&a.get("folder")},isVanillaFolder:function(a){return this.isFolder(a)&&!this.isIndex(a)},isAdjustablePageSizeCollection:function(b){var d=k.getCollectionConfig(b.get("typeName")),d=d&&d.forcePageSize,h=b.get("type")===
e.COLLECTION_TYPE_GENERIC,g=this._getCollectionOrdering(b)===a.Squarespace.CollectionOrdering.CHRONOLOGICAL;return!d&&!this.isIndex(b)&&!this.isFolder(b)&&h&&g},isBlog:function(b){return!this.isGenericOrProduct(b)||this.isFolder(b)||this.isIndex(b)?!1:this._getCollectionOrdering(b)==a.Squarespace.CollectionOrdering.CHRONOLOGICAL?!0:!1},_getCollectionOrdering:function(a){return a.get("ordering")||a.getTemplateConfiguration().get("ordering")},isPostableByEmailAddress:function(b){var d=this._getCollectionOrdering(b);
return!this.isIndex(b)&&!this.isFolder(b)&&b.get("type")===e.COLLECTION_TYPE_GENERIC&&d!==a.Squarespace.CollectionOrdering.CALENDAR&&d!==a.Squarespace.CollectionOrdering.CUSTOM&&d!==a.Squarespace.CollectionOrdering.MUSIC_ALBUM},isSupportedByBookmarklet:function(b){return!this.isIndex(b)&&!this.isFolder(b)&&b.get("type")===e.COLLECTION_TYPE_GENERIC&&this._getCollectionOrdering(b)===a.Squarespace.CollectionOrdering.CHRONOLOGICAL},hasSupportForInjectableCodePerItem:function(b){return!this.isIndex(b)&&
!this.isFolder(b)&&b.get("type")===e.COLLECTION_TYPE_GENERIC&&this._getCollectionOrdering(b)===a.Squarespace.CollectionOrdering.CHRONOLOGICAL},hasSupportForSyndication:function(b){return!this.isIndex(b)&&!this.isFolder(b)&&b.get("type")===e.COLLECTION_TYPE_GENERIC&&this._getCollectionOrdering(b)===a.Squarespace.CollectionOrdering.CHRONOLOGICAL},isDemoCollectionId:function(b){var e=k.getState().demoCollections;return!e?!1:!!a.Array.find(e,function(a){return a.collectionId==b})},isGenericOrProduct:function(a){a=
a.getTemplateConfiguration();return!a?!1:!1===a.get("folder")&&(a.get("collectionType")===e.PRODUCTS||a.get("collectionType")===e.COLLECTION_TYPE_GENERIC)},isProduct:function(a){var b=a.getTemplateConfiguration();return!b||a.get("isDemoCollection")?!1:!1===b.get("folder")&&b.get("collectionType")===e.PRODUCTS},isPage:function(a){a=a.getTemplateConfiguration();return!a?!1:!1===a.get("folder")&&a.get("collectionType")===e.COLLECTION_TYPE_PAGE},isNotCalendar:function(b){return b.getTemplateConfiguration().get("ordering")===
a.Squarespace.CollectionOrdering.CALENDAR?!1:!0},usesDisplayIndex:function(b){return[a.Squarespace.CollectionOrdering.MUSIC_ALBUM,a.Squarespace.CollectionOrdering.USER].includes(b)},getIdentifierForCollection:function(b){if(!a.Lang.isValue(b))return null;var d=b.get("typeName");!d&&b.get("type")===e.COLLECTION_TYPE_PAGE&&(b.set("typeName","page"),d="page");var h=b.get("type");if(h===e.COLLECTION_TYPE_GENERIC){var g=b.get("ordering");a.Lang.isValue(g)||(g=k.getCollectionConfig(d),d=k.getPageConfig(d),
g=(g||d).ordering);if(a.Squarespace.ContentCollectionUtils.isIndex(b))return"INDEX";if(g===a.Squarespace.CollectionOrdering.USER)return"GALLERY";if(g===a.Squarespace.CollectionOrdering.CHRONOLOGICAL)return"BLOG";if(g===a.Squarespace.CollectionOrdering.CALENDAR)return"CALENDAR";if(g===a.Squarespace.CollectionOrdering.MUSIC_ALBUM)return"MUSIC_ALBUM";if(g===a.Squarespace.CollectionOrdering.KNOWLEDGE_BASE)return"KNOWLEDGE_BASE"}if(h===e.COLLECTION_TYPE_PAGE)return"PAGE";if(h===e.PRODUCTS)return"PRODUCT";
if(h===e.TEMPLATE_PAGE)return"TEMPLATE_PAGE"}}},"1.0",{requires:["squarespace-models-content-collection"]})},1150:function(g,b,a){var k=a(1);YUI.add("squarespace-mixins-event-list",function(a){a.namespace("Squarespace.Mixins");a.Squarespace.Mixins.EventList=a.Base.create("EventList",a.Base,[],{initializer:function(){a.Do.before(function(b){var c=a.Object.hasKey(b,"upcoming"),f=a.Object.hasKey(b,"past");if(c&&f)return new a.Do.AlterArgs(k("Parsing calendar-specific response"),[[].concat(b.upcoming).concat(b.past)])},
this,"parse",this)},getPastEvents:function(){var b=new Date;return this.filter(function(c){c=c.get("structuredContent");if(null===c)return!1;c=a.DataType.Date.parse(c.get("endDate"));return a.DataType.Date.isGreater(b,c)})},getUpcomingEvents:function(){var b=new Date;return this.filter(function(c){c=c.get("structuredContent");if(null===c)return!1;c=a.DataType.Date.parse(c.get("endDate"));return!a.DataType.Date.isGreater(b,c)})}})},"1.0",{requires:["base","datatype-date","event-custom","json"]})},
1151:function(g,b){YUI.add("squarespace-models-audio",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.Audio=a.Base.create("Audio",a.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Audio",validator:function(a){return"Audio"===a},readOnly:!0},embed:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},audioAssetUrl:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},artistName:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},
lengthInMilliSeconds:{value:null,validator:a.Squarespace.AttrValidators.isNullOrNumber},bitRate:{value:null,validator:a.Squarespace.AttrValidators.isNullOrNumber},sampleRate:{value:null,validator:a.Squarespace.AttrValidators.isNullOrNumber}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},1152:function(g,b){YUI.add("squarespace-models-calendar-event",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.CalendarEvent=a.Base.create("CalendarEvent",
a.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"CalendarEvent",validator:function(a){return"CalendarEvent"===a},readOnly:!0},startDate:{valueFn:function(){var a=new Date,b=a.getMinutes();a.setSeconds(0);a.setMilliseconds(0);30<=b?(a.addHours(1),a.setMinutes(0)):a.setMinutes(30);return a.getTime()},validator:a.Squarespace.AttrValidators.isNumber},endDate:{valueFn:function(){var a=new Date(this.get("startDate"));a.addHours(1);return a.getTime()},validator:a.Squarespace.AttrValidators.isNumber}}})},
"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},1153:function(g,b){YUI.add("squarespace-models-check-in",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.CheckIn=a.Base.create("CheckIn",a.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"CheckIn",validator:function(a){return"CheckIn"===a},readOnly:!0},checkinId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},venueId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},
timeZone:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},venueName:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},address:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},crossStreet:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},city:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},state:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},country:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},
postalCode:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},categoryId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},categoryPluralName:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},categoryShortName:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},categoryIcon:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},
1154:function(g,b,a){var k=a(36),e=a(568);YUI.add("squarespace-models-collection-configuration",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.CollectionConfiguration=a.Base.create("CollectionConfiguration",a.Model,[],{initializer:function(b){a.Lang.isBoolean(b.index)&&b.index?this.set("folderBehavior",e.INDEX):a.Lang.isBoolean(b.folder)&&b.folder&&this.set("folderBehavior",e.NONE)}},{ATTRS:{collectionType:{value:k.COLLECTION_TYPE_GENERIC},folder:{value:!1},folderBehavior:{},supported:{value:!0}}})},
"1.0",{requires:["base","model"]})},1155:function(g,b,a){a(9);var k=a(338),e=a(302),h=a(99),c=a(583),f=a(946),d=a(36),l=a(149),m=a(268),r=a(163);YUI.add("squarespace-models-content-collection",function(a){a.namespace("Squarespace.Models");var b=a.Squarespace.Models.ContentCollection=a.Base.create("Collection",a.Model,[],{initializer:function(b){this.items=b?new a.Squarespace.Models.ContentItemList({items:b.items||[],parent:this,limit:this.get("itemLimit")}):new a.Squarespace.Models.ContentItemList({parent:this,
limit:this.get("itemLimit")});this._itemsEventHandle=this.items.after(["load","add","remove"],this._updateItemCount,this);this._syncFolderChange(this.get("folder"));this.after("folderChange",function(a){this._syncFolderChange(a.newVal)});this._initialAttrs=this.getAttrs();this.unlistenToModelStore=f.listen(this._handleStoreChange.bind(this))},destructor:function(){this._itemsEventHandle.detach();this._itemsEventHandle=null;this.items.destroy();this.items=null},toDebugString:function(){return a.JSON.stringify(this.getAttrs(["navigationTitle",
"urlId","id"]))},toJSON:function(){var a=this.constructor.superclass.toJSON.call(this);a.items=this.items.toJSON();return a},parse:function(a){a=b.superclass.parse.apply(this,arguments);a.passwordProtected&&(a.password=l.PASSWORD_MASK);return a},sync:function(a,b,c){switch(a){case "create":this._ensureDemoCloneAndSave(c);break;case "delete":b.isUnusedStarterPage?this._deleteUnusedCollectionPermanently(c):this._delete(c);break;case "read":this._read(b,c);break;case "update":this._ensureDemoCloneAndSave(c)}},
load:function(b,c,e){"function"===typeof b&&(e=c,c=b,b={});if(this._readInProgress)this.onceAfter("load",c,e);else a.Model.prototype.load.call(this,b,c?a.bind(c,e||this):null)},resetToLastRead:function(){return f.fetch(this.get("id")).then(function(b){var c=this.getAttrs();a.Object.keys(c).map(function(a){c[a]=void 0});b=a.merge(c,this._initialAttrs,this.parse(b.toJS()));this.setAttrs(b);this.set("dirty",!1)}.bind(this)).catch(this._errorHandler)},updateAttributes:function(a,b){this.setAttrs(a,b)},
ensureProcessedItems:function(){var b=function(c){this.items.load({fields:["mediaProcessingState"]},function(){this.items.some(function(a){return a.get("mediaProcessingState")!==m.READY})?a.later(500,this,b,c):c()}.bind(this))}.bind(this);return new a.Promise(function(a){b(a)}.bind(this))},_syncFolderChange:function(a){a&&this.set("dropdown",!0)},_ensureDemoCloneAndSave:function(b){if(this._shouldCloneCollection()){var c=this.toJSON();delete c.id;this.cloneToNewCollection({silent:!0}).then(a.bind(this._save,
this,b,c))}else this._save(b)},_handleStoreChange:function(a){if(a=a.get(this.getId()))this.setAttrs(this.parse(a.toJS())),this.set("dirty",!1)},serialize:function(b){b=a.merge(b,this.toJSON());b.collectionId=b.id;delete b.dirty;delete b.body;delete b.tags;delete b.categories;delete b.iTunesImage;delete b.items;a.Lang.isValue(b.mainImage)&&(b.mainImageId=a.instanceOf(b.mainImage,a.Squarespace.Models.ContentItem)?b.mainImage.get("id"):b.mainImage.id);delete b.mainImage;b.metadata&&b.metadata.albumCover&&
delete b.metadata.albumCover;b.productQuickViewEnabled&&(b.features.productQuickView.isEnabled=b.productQuickViewEnabled,delete b.productQuickViewEnabled);b.relatedItemsEnabled&&(b.features.relatedItems.isEnabled=b.relatedItemsEnabled,delete b.relatedItemsEnabled);return b},_errorHandler:function(a){console.error(a.stack)},_save:function(a,b){b=this.serialize(b);c.update(b).then(function(b){b.error?a(b,null):(this._initialAttrs=b,a(null,b))}).catch(this._errorHandler)},_delete:function(a){c.delete(this.get("id")).then(function(b){a(null,
b)},function(b){a(b,null)}).catch(this._errorHandler)},_deleteUnusedCollectionPermanently:function(a){c.deleteUnusedCollectionPermanently(this.get("id")).then(function(b){a(null,b)},function(b){a(b,null)}).catch(this._errorHandler)},_read:function(b,c){this._readInProgress=!0;f.fetch(this.get("id")).then(function(b){var e=this.parse(b.toJS());a.Squarespace.ContentCollectionUtils.usesDisplayIndex(e.ordering)?this._fetchItemCount(e.id).then(function(a){this._readInProgress=!1;e.itemCount=a;c(null,e)}.bind(this)):
(this._readInProgress=!1,c(null,e))}.bind(this),function(a){this._readInProgress=!1;c(a,null)}.bind(this)).catch(this._errorHandler)},_updateItemCount:function(){a.Squarespace.ContentCollectionUtils.usesDisplayIndex(this.get("ordering"))&&(this.isNew()?this.set("itemCount",0):this._fetchItemCount(this.get("id")).then(function(a){this.set("itemCount",a)}.bind(this)).catch(this._errorHandler))},_fetchItemCount:function(b){return new a.Promise(function(c,e){a.Data.get({url:"/api/content-collections/"+
b+"/item-count",success:function(a){c(a)},failure:e},this)})},getTemplateConfiguration:function(){var b;b=this.get("typeName");var c=this.get("type");return(b=c===d.TEMPLATE_PAGE?h.getPageConfig(b):h.getCollectionConfig(b))?new a.Squarespace.Models.CollectionConfiguration(b):new a.Squarespace.Models.CollectionConfiguration({collectionType:c||d.COLLECTION_TYPE_GENERIC,ordering:this.get("ordering"),folder:this.get("folder"),supported:!1})},cloneToNewCollection:function(b){return new a.Promise(a.bind(function(c,
e){var d=a.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(this.get("id"));this._cloneExampleContent(b).then(a.bind(function(a){d.set("collectionId",a);d.save(c)},this))},this))},_cloneExampleContent:function(b){b=b||{};var c=new a.Promise(a.bind(function(c,d){var f=this.get("id");a.Data.post({url:"/api/commondata/CopyCollection",data:{collectionId:this.get("id"),processPointedCollectionItems:!!b.processPointedCollectionItems},success:function(b){this.setAttrs(a.merge({mainImageId:null,
mainImage:null},b));var g=b.id;k.getHomepageCollectionId()===f?e.setHomepageCollectionId(g).then(function(a){a.error?d():c(g)}):c(g)}},this)},this));c.then(a.bind(function(){this.fire("clonedExampleContent",{silent:!!b.silent})},this));return c},_shouldCloneCollection:function(){return this.get("isDemoCollection")&&this.get("type")===d.COLLECTION_TYPE_PAGE},deleteTrashItems:function(b){a.Data.del({url:"/api/recycle-bin/collection/"+this.get("id")+"/items",success:function(a){b(a,null)},failure:function(a){b(null,
a)}})},getId:function(){return this.get("id")},_set:function(a,b,c){return this.constructor.superclass._set.call(this,a,b,c)}},{ATTRS:{dirty:{value:!1},body:{value:null},title:{validator:a.Lang.isString},navigationTitle:{validator:a.Lang.isString},description:{value:{html:"",source:""}},websiteId:{},id:{value:null},enabled:{value:!0,validator:a.Lang.isBoolean},deleted:{value:!1,validator:a.Lang.isBoolean},homepage:{validator:a.Lang.isBoolean},starred:{validator:a.Lang.isBoolean},synchronizing:{validator:a.Lang.isBoolean},
updatedOn:{},folder:{value:!1},isDemoCollection:{getter:function(){return a.Squarespace.ContentCollectionUtils.isDemoCollectionId(this.get("id"))}},itemCountExceeded:{getter:function(){return this.get("type")==d.PRODUCTS&&this.get("itemCount")>=this.get("maxItemCount")?!0:!1}},itemCount:{validator:a.Lang.isNumber},isEmpty:{getter:function(){return 0===this.items.size()}},maxItemCount:{getter:function(){return this.get("type")==d.PRODUCTS?200:9999}},tags:{value:[],validator:a.Lang.isArray},categories:{value:[],
validator:a.Lang.isArray},pageSize:{validator:a.Lang.isNumber,valueFn:function(){if(this.getTemplateConfiguration().get("ordering")===r.CHRONOLOGICAL)return 20}},itemLimit:{value:20,validator:a.Squarespace.AttrValidators.isNumber},ordering:{validator:function(b){return a.Object.values(r).includes(b)}},type:{validator:function(b){return a.Object.values(d).includes(b)}},typeName:{validator:a.Lang.isString},video:{validator:a.Lang.isObject},fullUrl:{validator:a.Lang.isString},urlId:{validator:a.Squarespace.AttrValidators.isNullOrString},
nextDisplayIndex:{getter:function(){return this.get("itemCount")}},regionName:{value:"default",validator:function(b){return!a.Lang.isString(b)||0===b.length?!1:a.Object.keys(h.getState().layouts).includes(b)}},postByEmailAddress:{getter:function(a){return a?a+"@squarespace.com":""}}}});a.Squarespace.Models.ContentCollectionList=a.Base.create("Collections",a.ModelList,[],{model:a.Squarespace.Models.ContentCollection,sync:function(a,b,e){"read"==a&&c.readAll().then(function(a){e(null,a)},function(a){e(a,
null)}).catch(this._errorHandler)},getCollectionById:function(b,c,e){var d=this.getById(b);d?c.call(e,d):(d=new a.Squarespace.Models.ContentCollection({id:b}),d.load({},function(){this.add(d);c.call(e,d)},this))},getCollectionFromData:function(b,c){if(!b)return null;if(!b.id)throw Error("getCollectionFromData needs at least an ID in the data to work.");var e=this.getById(b.id);e?c||e.setAttrs(b):e=this.add(new a.Squarespace.Models.ContentCollection(b));return e}});a.Squarespace.Utils.isInDamaskFrame()?
a.Squarespace.ContentCollectionCache=a.config.win.top.Y.Squarespace.ContentCollectionCache:a.Squarespace.ContentCollectionCache=new a.Squarespace.Models.ContentCollectionList},"2.0",{requires:"base model model-list promise squarespace-content-collection-utils squarespace-models-collection-configuration squarespace-models-content-item squarespace-models-content-item-list squarespace-util squarespace-util-authenticated".split(" ")})},1156:function(g,b,a){var k=a(164);YUI.add("squarespace-models-content-item-list",
function(a){a.namespace("Squarespace.Models");var b=a.Squarespace.Models.ContentItemList=a.Base.create("ContentItemList",a.ModelList,[a.Squarespace.Mixins.EventList],{initializer:function(b){this.model=a.Squarespace.Models.ContentItem;b=b||{};(b=b.items)&&this.reset(b)},sync:function(a,b,d){switch(a){case "create":console.error("Squarespace.Models.ContentItemList: Create not implemented.");break;case "delete":console.error("Squarespace.Models.ContentItemList: Create not implemented.");break;case "read":this._read(b,
d);break;case "update":console.error("Squarespace.Models.ContentItemList: Create not implemented.")}},load:function(a,e){if(this.get("isChildItemList"))throw Error("Squarespace.Models.ContentItemList: Child items are loaded with their parent item. Loading them manually is not supported");b.superclass.load.call(this,a,e)},removeItems:function(b,f){this.remove(b,{source:"bulk-remove"});var d=a.Array.map(b,function(a){var b=a.get("id");a.destroy();return b},this);a.Data.post({url:"/api/commondata/RemoveItems",
data:{items:d},success:function(d){this.get("parent").load();a.Lang.isFunction(f)&&f(null,d);this.fire("bulk-remove",b)},failure:function(b){a.Lang.isFunction(f)&&f(b,null)}},this)},moveItems:function(b,f,d){if(this.get("isChildItemList"))throw Error("Squarespace.Models.ContentItemList: Moving child items is not currently supported.");var g=a.Array.map(b,function(a){return null!==this.getById(a.get("id"))?this.remove(this.getById(a.get("id"))):a},this),h=f.get("id"),k=f.items;k.load(a.bind(function(){k.add(g)},
this));var s=a.Array.map(g,function(a){a.set("collectionId",h);a.get("items").each(function(a){a.set("collectionId",h)});a.save();return a.get("id")},this);a.Data.post({url:"/api/commondata/MoveItems",data:{toCollectionId:h,items:s},success:function(g){this.get("parent").load();a.Lang.isFunction(d)&&d(null,g);this.fire("move-items",b,f)},failure:function(b){a.Lang.isFunction(d)&&d(b,null)}},this)},reorderItems:function(b,f,d){var g=this.get("parent"),h={};this.get("isChildItemList")?(h.collectionId=
g.get("collectionId"),h.parentId=g.get("id")):h.collectionId=g.get("id");var k=1===b.length,s;k?(b=b[0],s=this.indexOf(this.getById(b.get("id"))),this._reorder([b],f),0!==f&&(h.afterId=this.item(f-1).get("id")),h.itemId=b.get("id")):(this._reorder(b,f),0!==f&&(h.afterId=this.item(f-1).get("id")),b=a.Array.map(b,function(a){return a.get("id")},this),h.itemIds=a.JSON.stringify(b));var q=a.bind(function(b){a.Data.post({url:"/api/commondata/ReorderItems",data:b,success:function(b){k&&(0===s||0===f)&&
g.load();a.Lang.isUndefined(b.items)||a.Array.each(b.items,function(a,b){this.getById(a.id).set("displayIndex",a.displayIndex)},this);this.fire("reordered");a.Lang.isFunction(d)&&d(null,b);0<this._reorderQueue.size()&&q(thie._reorderQueue.next())},failure:function(b){a.Lang.isFunction(d)&&d(b,null)}},this)},this);this._reorderQueue||(this._reorderQueue=new a.Queue);this._reorderQueue.add(h);q(this._reorderQueue.next())},_reorder:function(a,b){var d=a.map(function(a){return this.getById(a.get("id"))},
this);this.remove(d,{onReorder:!0,source:"reorder"});this.add(d,{onReorder:!0,source:"reorder",index:b})},_read:function(b,f){a.Data.get({url:this._getReadUrl(),data:a.merge({limit:this.get("limit")},b),success:function(a){this.set("pagination",{hasNextPage:a.hasNextPage,hasPreviousPage:a.hasPreviousPage,nextPageStart:a.nextPageStart,previousPageStart:a.previousPageStart});f(null,a.results)},failure:function(a){f(a,null)}},this)},_getReadUrl:function(){var b=this.get("parent"),f=k.getTemplateForCollectionItems(b.get("ordering"),
b.get("type"));return a.Lang.sub(f,{collectionId:b.get("id")})}},{ATTRS:{parent:{value:null,validator:function(b){return b instanceof a.Squarespace.Models.ContentCollection||b instanceof a.Squarespace.Models.ContentItem}},isChildItemList:{getter:function(){return this.get("parent")instanceof a.Squarespace.Models.ContentItem}},pagination:{value:null},limit:{value:20,validator:a.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:"base json model-list squarespace-content-collection-utils squarespace-mixins-event-list squarespace-models-content-collection squarespace-models-content-item squarespace-util".split(" ")})},
1157:function(g,b,a){var k=a(527),e=a(268),h=a(96),c=a(528),f=a(791),d=a(140),l=a(157),m=a(607),r=a(1113),s=a(95);a(173);var q=a(164);YUI.add("squarespace-models-content-item",function(a){a.namespace("Squarespace.Models");var b=a.Squarespace.Models.ContentItem=a.Base.create("Item",a.Model,[],{sync:function(a,b,c){switch(a){case "delete":this._getParentCollection().then(this._getUrlDeterminants.bind(this)).then(this._delete.bind(this,c));break;case "read":this._getParentCollection().then(this._getUrlDeterminants.bind(this)).then(this._read.bind(this,
b,c));break;case "update":this._getParentCollection().then(this._getUrlDeterminants.bind(this)).then(this._save.bind(this,c));break;case "create":this._getParentCollection().then(this._getUrlDeterminants.bind(this)).then(this._create.bind(this,b,c))}},_errorHandler:function(a){console.error(a.stack)},_save:function(a,b){var c=this.serialize();c.id||this._create(a);c.collectionId?d.updateForCollection(c,b).then(function(b){this._initialAttrs=b;a(null,b)},function(b){a(b,null)}).catch(this._errorHandler):
d.update(c).then(function(b){this._initialAttrs=b;a(null,b)},function(b){a(b,null)}).catch(this._errorHandler)},_create:function(a,b,c){var e=this.serialize();e.collectionId?d.createForCollection(e,a,c).then(function(a){b(null,a)},function(a){b(a,null)}).catch(this._errorHandler):d.create(e,a).then(function(a){b(null,a)},function(a){b(a,null)}).catch(this._errorHandler)},_delete:function(a,b){d.delete(this.get("id"),b).then(function(b){a(null,b)},function(b){a(b,null)}).catch(this._errorHandler)},
_read:function(a,b,c){this.get("isGlobalFakeContentItem")?this._readGlobalFakeContentItem(this.get("id"),a,b):(this._readInProgress=!0,a.forceReload?d.read(this.get("id"),!1,c).then(function(a){this._readInProgress=!1;a=a?a.toJS():a;b(null,a)}.bind(this),function(a){this._readInProgress=!1;b(a,null)}.bind(this)).catch(this._errorHandler):r.fetchStaged(this.get("id"),c).then(function(a){this._readInProgress=!1;b(null,a.toJS())}.bind(this),function(a){this._readInProgress=!1;b(a,null)}.bind(this)).catch(this._errorHandler))},
_readGlobalFakeContentItem:function(b,c,d){a.Data.get({url:"/api/rest/global-content-items/"+b,success:function(a){d(null,a)},failure:function(a){d(a,null)}},this)},_getUrlDeterminants:function(a){var b={recordType:this.get("recordType")};a&&(b.collectionOrdering=a.get("ordering"),b.collectionType=a.get("type"),b.collectionId=a.get("id"),b.parentId=this.get("parentId"));return b},resetToLastRead:function(){m.reset(this.toJSON())},initializer:function(a){this._needsJobListener()&&this._bindJobListener();
this._updateNextDisplayIndex();a=this.get("items");a.after(["add","remove"],function(){this._updateNextDisplayIndex();m.updateAttributes(this.getId(),{items:this.get("items")})},this);this.items=a;this._initialAttrs=this.getAttrs();this.bindListenersToContentStores()},destructor:function(){this._jobListener&&(this._jobListener.detach(),this._jobListener=null);this._actionListeners&&this._actionListeners.forEach(function(a){f.removeActionListener(a)})},bindListenersToContentStores:function(){this._actionListeners=
[];this._actionListeners.push(f.addActionListener(m.UPDATE_ATTRIBUTES,this._onUpdate.bind(this)));this._actionListeners.push(f.addActionListener(m.RESET,this._onReset.bind(this)));this._actionListeners.push(f.addActionListener(d.INSERT,this._onInsert.bind(this)))},_onUpdate:function(b){this.get("id")===a.Object.getValue(b,["itemId"])&&this._setAttrsInOrder(b.attrs)},_onReset:function(b){this.get("id")===a.Object.getValue(b,["id"])&&l.fetch(this.get("id")).then(function(b){var c=this.getAttrs();a.Object.keys(c).map(function(a){c[a]=
void 0});b=a.merge(c,this._initialAttrs,b.toJS());this._setAttrsInOrder(b)}.bind(this)).catch(this._errorHandler)},_onInsert:function(b){if(this.get("id")===a.Object.getValue(b,["id"])){var c=r.getItemState(this.getId());this._setAttrsInOrder(a.merge(b,c))}},_getParentCollection:function(){return new a.Promise(function(b,c){var d=this.get("collectionId");d?a.Squarespace.ContentCollectionCache.getCollectionById(d,b):b(null)}.bind(this))},_setAttrsInOrder:function(a){if(a&&a.mediaProcessingState){var b=
Object.keys(a).filter(function(a){return"mediaProcessingState"!==a}).reduce(function(b,c){b[c]=a[c];return b},{});this.setAttrs(b);this.set("mediaProcessingState",a.mediaProcessingState)}else this.setAttrs(a)},updateAttributes:function(a,b){this.setAttrs(a,b);m.updateAttributes(this.getId(),a)},toJSON:function(){var c=b.superclass.toJSON.call(this),d=c.structuredContent;a.Lang.isValue(d)&&(c.structuredContent=d.toJSON());c.items=c.items.toJSON();a.Lang.isObject(c.pushedServices)&&(c.pushedServices=
a.Object.keys(c.pushedServices));a.Lang.isObject(c.pendingPushedServices)&&(c.pendingPushedServices=a.Object.keys(c.pendingPushedServices));return c},serialize:function(){var a=this.toJSON();delete a.dirty;delete a.items;delete a.author;delete a.fullUrl;delete a.assetUrl;delete a.resolved;delete a.postItemInjectCode;delete a.promotedBlock;delete a.promotedBlockType;delete a.nextDisplayIndex;delete a.mediaIsUploading;delete a.hasFileData;delete a.isGlobalFakeContentItem;delete a.childrenGroups;delete a.colorData;
delete a.mainImage;delete a.gallery;this._normalizeDates(a);this._attachCommentingToData(a);this._attachWorkflowToData(a);this._updateStructuredContent(a);return a},_updateStructuredContent:function(b){b.structuredContent&&b.startDate&&(b.structuredContent=a.merge(b.structuredContent,{startDate:b.startDate,endDate:b.endDate}))},_getWorkflowStateForString:function(b){return a.Object.getValue({published:c.PUBLISHED,scheduled:c.SCHEDULED,needsreview:c.NEEDS_REVIEW,draft:c.DRAFT},b)},_attachWorkflowToData:function(b){a.Lang.isValue(b.workflow)&&
(b.workflowState=this._getWorkflowStateForString(b.workflow.state),b.publishOn=b.workflow.date,delete b.workflow)},_attachCommentingToData:function(b){a.Lang.isValue(b.commenting)&&(b.commentState=a.Squarespace.CommentStates["allow"===b.commenting.state?"ENABLED":"DISABLED"],b.commentDisableOn=b.commenting.date,delete b.commenting)},_normalizeDates:function(b){a.Array.each("addedOn publishOn updatedOn commentDisableOn startDate endDate".split(" "),function(c,d){a.Lang.isDate(b[c])&&(b[c]=b[c].getTime())},
this)},save:function(c,d){this.isNew()||!a.Lang.isObject(c)||!c.fields?b.superclass.save.call(this,c,d):this._saveFields(c.fields,d)},autoSave:function(b,c){a.Lang.isFunction(b)?(c=b,b={}):a.Lang.isValue(b)||(b={});b.headers=a.merge(b.headers,{"X-AutoSave":!0});this.save(b,c)},like:function(b){a.Data.post({url:"/api/content-items/"+this.getId()+"/sentiment/like",success:function(c){a.Lang.isFunction(b)&&b(null,c)},failure:function(c){a.Lang.isFunction(b)&&b(c,null)}},this)},dislike:function(b){a.Data.post({url:"/api/content-items/"+
this.getId()+"/sentiment/dislike",success:function(c){a.Lang.isFunction(b)&&b(null,c)},failure:function(c){a.Lang.isFunction(b)&&b(c,null)}},this)},clearFileData:function(b){this.setAttrs({systemDataId:null,systemDataOrigin:null,mediaProcessingState:null,systemDataSourceType:null,systemDataVariants:null,filename:null});this._getParentCollection().then(this._getUrlDeterminants.bind(this)).then(function(b){var c=this.get("id");b=q.getMainImageDeletionUrl(b).replace("{id}",c);a.Data.del({url:b,data:{itemId:c}})}.bind(this))},
clearChildGroup:function(b,c){a.Data.post({url:"/api/commondata/ClearChildGroup",data:{childType:b,itemId:this.get("id")},success:function(b){a.Lang.isFunction(c)&&c(null,b)},failure:function(b){a.Lang.isFunction(c)&&c(b,null)}})},getAssetUrlForFormat:function(b){return a.Lang.sub("{assetUrl}?format={format}",{assetUrl:this.get("assetUrl"),format:b})},getId:function(){return this.get("id")},isLicensedAssetPreview:function(){return a.Lang.isValue(this.get("licensedAssetPreview"))},isLicensedAsset:function(){return a.Lang.isValue(this.get("licensedAssetId"))},
getMainImageUploadUrl:function(a){this._getParentCollection().then(this._getUrlDeterminants.bind(this)).then(function(b){a(q.getMainImageUploadUrl(b).replace("{id}",this.get("id")))}.bind(this))},_needsJobListener:function(){var a=this.get("mediaProcessingState");return a===e.QUEUED||a===e.PROCESSING},_bindJobListener:function(){Static&&Static.JOB_MANAGER&&(this._jobListener=a.config.win.Static.JOB_MANAGER.on("completed",function(b){var c=b.job;b=this.get("id");var d=c.get("data.contentItemId"),c=
c.get("data.globalContentItemId");d===b?(this.load({forceReload:!0}),this._jobListener.detach()):a.Lang.isValue(c)&&c===b&&(this._readGlobalFakeContentItem(c,{},function(a,b){a?console.log("error loading model",a):(this.set("assetUrl",b.assetUrl),this.setAttrs(b))}.bind(this)),this._jobListener.detach())},this))},_updateNextDisplayIndex:function(){var a=0;this.get("items").each(function(b){b=b.get("displayIndex");b>=a&&(a=b+1)},this);this._set("nextDisplayIndex",a)},_saveFields:function(b,c){if(1<
b.length)throw Error("Saving multiple fields is not currently supported.");var e=b[0],e={field:e,itemId:this.get("id"),value:this.get(e)};d.update(e).then(function(b){a.Lang.isFunction(c)&&c(null,b.item)},function(b){a.Lang.isFunction(c)&&c.call(b,null)}).catch(this._errorHandler)},_getStructuredContentCtor:function(){switch(this.get("recordType")){case h.AUDIO:return a.Squarespace.Models.Audio;case h.EVENT:return a.Squarespace.Models.CalendarEvent;case h.CHECKIN:return a.Squarespace.Models.CheckIn;
case h.VIDEO:return a.Squarespace.Models.Embed;case h.KBARTICLE:return a.Squarespace.Models.KBArticle;case h.LINK:return a.Squarespace.Models.Link;case h.QUOTE:return a.Squarespace.Models.Quote;case h.STORE_ITEM:return a.Squarespace.Models.StoreItem;case h.TWEET:return a.Squarespace.Models.Tweet;default:return null}}},{ATTRS:{id:{value:null},collectionId:{value:null},parentId:{value:null},authorId:{valueFn:function(){var b=a.Object.getValue(Static,["SQUARESPACE_CONTEXT","authenticatedAccount"]);return b?
b.id:null}},proxyForId:{value:null},recordType:{validator:a.Squarespace.AttrValidators.isValueIn(h),writeOnce:!0},childType:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},addedOn:{valueFn:function(){return(new Date).getTime()},validator:a.Squarespace.AttrValidators.isNumber,writeOnce:"initOnly"},updatedOn:{value:null,validator:a.Squarespace.AttrValidators.isNullOrNumber,writeOnce:"initOnly"},publishOn:{valueFn:function(){return(new Date).getTime()},validator:a.Squarespace.AttrValidators.isNumber},
unsaved:{value:null,validator:a.Squarespace.AttrValidators.isNullOrBoolean},urlId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},title:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},body:{value:null,setter:function(b){return a.merge(this.get("body"),b)},validator:a.Squarespace.AttrValidators.isNullOrObject},excerpt:{value:{html:"",raw:!1},validator:a.Squarespace.AttrValidators.isNullOrObject},displayIndex:{value:0,validator:a.Squarespace.AttrValidators.isNumber},
starred:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},passthrough:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},tags:{value:[],validator:a.Squarespace.AttrValidators.isArray},categories:{value:[],validator:a.Squarespace.AttrValidators.isArray},workflowState:{value:c.DRAFT,validator:a.Squarespace.AttrValidators.isValueIn(c)},systemDataId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},systemDataVariants:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},
systemDataOrigin:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},contentType:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},filename:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},dataSize:{value:null,validator:a.Squarespace.AttrValidators.isNullOrNumber},sourceUrl:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},mediaProcessingState:{value:null,validator:a.Squarespace.AttrValidators.isNullOr(a.Squarespace.AttrValidators.isValueIn(e))},
mediaFocalPoint:{value:{x:0.5,y:0.5},setter:function(b){if(a.Lang.isString(b)){b=b.split(",");var c=parseFloat(b[0]);b=parseFloat(b[1]);return{x:!isNaN(c)&&1>=c?c:0.5,y:!isNaN(b)&&1>=b?b:0.5}}return b}},colorData:{value:null,validator:a.Squarespace.AttrValidators.isNullOrObject},clickthroughUrl:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},location:{value:null,validator:a.Squarespace.AttrValidators.isNullOrObject},customContent:{value:null},likeCount:{value:0,validator:a.Squarespace.AttrValidators.isNumber},
dislikeCount:{value:0,validator:a.Squarespace.AttrValidators.isNumber},commentCount:{value:0,validator:a.Squarespace.AttrValidators.isNumber},publicCommentCount:{value:0,validator:a.Squarespace.AttrValidators.isNumber},commentState:{valueFn:function(){var a=s.getState().toJS(),b=a.commentsEnabled;return a.commentEnableByDefault&&b?k.ENABLED:k.DISABLED},validator:a.Squarespace.AttrValidators.isValueIn(k)},commentDisableOn:{valueFn:function(){var b=a.Object.getValue(Static,["SQUARESPACE_CONTEXT","websiteSettings",
"commentDisableAfterDaysDefault"]);return b?a.Date.addDays(new Date,b).getTime():null},validator:a.Squarespace.AttrValidators.isNullOrNumber},pushedServices:{value:{},validator:a.Squarespace.AttrValidators.isObject},shareStates:{value:[]},structuredContent:{valueFn:function(){var b=this._getStructuredContentCtor();return a.Lang.isNull(b)?null:new b},setter:function(b){if(b instanceof a.Squarespace.Models.StructuredContent)return b;var c=this._getStructuredContentCtor();return a.Lang.isNull(c)?null:
new c(b)}},items:{valueFn:function(){return new a.Squarespace.Models.ContentItemList({parent:this})},setter:function(b){var c=this.get("items");return a.Lang.isValue(c)?(c.reset(b),c):b instanceof a.Squarespace.Models.ContentItemList?b:new a.Squarespace.Models.ContentItemList({items:b,parent:this})}},childrenGroups:{value:{},validator:a.Squarespace.AttrValidators.isObject},author:{value:null,validator:a.Squarespace.AttrValidators.isNullOrObject},fullUrl:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},
assetUrl:{value:null,getter:function(b){return a.Squarespace.UrlUtils.isSecure()?a.Squarespace.UrlUtils.securifyURL(b):b},validator:a.Squarespace.AttrValidators.isNulLOrString},resolved:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},postItemInjectCode:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},promotedBlock:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},promotedBlockType:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},nextDisplayIndex:{value:0,
validator:a.Squarespace.AttrValidators.isNumber,readOnly:!0},mediaIsUploading:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},hasFileData:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},isGlobalFakeContentItem:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},licensedAssetPreview:{value:null,validator:a.Squarespace.AttrValidators.isNullOrObject},licensedAssetId:{value:null,validator:a.Lang.isString},isPusher:{value:!0,readOnly:!0,validator:a.Squarespace.AttrValidators.isBoolean},
dirty:{getter:function(){return r.getItemDirtyState(this.get("id"))}}}})},"1.0",{requires:"base json model squarespace-attr-validators squarespace-model-sync-rest squarespace-models-audio squarespace-models-calendar-event squarespace-models-check-in squarespace-models-content-collection squarespace-models-content-item-list squarespace-models-embed squarespace-models-instagram squarespace-models-kb-article squarespace-models-link squarespace-models-quote squarespace-models-store-item squarespace-models-tweet squarespace-url-utils squarespace-util".split(" ")})},
1158:function(g,b){YUI.add("squarespace-models-embed",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.Embed=a.Base.create("Embed",a.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Embed",validator:function(a){return"Embed"===a},readOnly:!0},embed:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},oembed:{value:null,validator:a.Squarespace.AttrValidators.isNullOrObject},overlay:{value:!0,validator:a.Squarespace.AttrValidators.isBoolean}}})},"1.0",
{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},1159:function(g,b){YUI.add("squarespace-models-instagram",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.Instagram=a.Base.create("Instagram",a.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Instagram",validator:function(a){return"Instagram"===a},readOnly:!0},instagramId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},timeZone:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},
imageLowResolutionUrl:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},imageThumbnailUrl:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},imageStandardUrl:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},width:{value:null,validator:a.Squarespace.AttrValidators.isNullOrNumber},height:{value:null,validator:a.Squarespace.AttrValidators.isNullOrNumber},filter:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},userProfilePictureUrl:{value:null,
validator:a.Squarespace.AttrValidators.isNullOrString},userAccountName:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},userDisplayName:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},1160:function(g,b){YUI.add("squarespace-models-kb-article",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.KBArticle=a.Base.create("KBArticle",a.Squarespace.Models.StructuredContent,
[],{},{ATTRS:{_type:{value:"KBArticle",validator:function(a){return"KBArticle"===a},readOnly:!0},upVotes:{value:0,validator:a.Squarespace.AttrValidators.isNumber},downVotes:{value:0,validator:a.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},1161:function(g,b){YUI.add("squarespace-models-link",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.Link=a.Base.create("Link",a.Squarespace.Models.StructuredContent,
[],{},{ATTRS:{_type:{value:"Link",validator:function(a){return"Link"===a},readOnly:!0},url:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},1163:function(g,b){YUI.add("squarespace-models-quote",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.Quote=a.Base.create("Quote",a.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Quote",validator:function(a){return"Quote"===
a},readOnly:!0},quote:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},1164:function(g,b,a){var k=a(1),e=a(137);YUI.add("squarespace-models-store-item",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.StoreItem=a.Base.create("StoreItem",a.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"StoreItem",validator:function(a){return"StoreItem"===a},readOnly:!0},
productType:{value:e.PHYSICAL,validator:a.Squarespace.AttrValidators.isValueIn(e)},priceCents:{value:0,validator:a.Squarespace.AttrValidators.isNumber},salePriceCents:{value:0,validator:a.Squarespace.AttrValidators.isNumber},onSale:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},variants:{value:[],validator:a.Squarespace.AttrValidators.isArray},originalVariants:{value:[],validator:a.Squarespace.AttrValidators.isArray},variantOptionOrdering:{value:[],validator:a.Squarespace.AttrValidators.isArray},
additionalFieldsFormId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},customAddButtonText:{value:k("Add to Cart"),validator:a.Squarespace.AttrValidators.isString},useCustomAddButtonText:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},additionalFieldsForm:{value:null}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},1165:function(g,b){YUI.add("squarespace-models-structured-content",function(a){a.namespace("Squarespace.Models");
a.Squarespace.Models.StructuredContent=a.Base.create("StructuredContent",a.Model,[],{},{ATTRS:{_type:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly"}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},1166:function(g,b){YUI.add("squarespace-models-tweet",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.Tweet=a.Base.create("Tweet",a.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Tweet",validator:function(a){return"Tweet"===
a},readOnly:!0},tweetId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},timeZone:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},accountId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},displayName:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},accountName:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},tweet:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},profileImageUrl:{value:null,
validator:a.Squarespace.AttrValidators.isNullOrString},profileImageUrlHttps:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},userLocation:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},3576:function(g,b,a){var k=a(1);YUI.add("squarespace-simple-liking",function(a){var b=a.config.win.Static;a.Squarespace.SimpleLike={TEXT_LIKE_VERB_NONE:k("No Likes"),TEXT_LIKE_VERB_SINGULAR:"Like",
TEXT_LIKE_VERB_PLURAL:"Likes",TEXT_LIKE_ACTIVATED:k("You like this"),TEXT_LIKE_SUGGEST:k("Click to like"),attached:!1,attach:function(){if(!this.attached){this.attached=!0;var c;try{localStorage&&((c=a.JSON.parse(localStorage.getItem("squarespace-likes")))||(c={}),localStorage.setItem("squarespace-likes",a.JSON.stringify(c)))}catch(f){c={}}this.eventHandlers=[];var d=a.delegate("click",function(b){b=b.currentTarget;var d=b.getAttribute("data-item-id");if(d){for(var f=0;5>f;++f)a.Squarespace.SimpleLike.burst(b);
if(!b.hasClass("clicked")&&!b.hasClass("float")){f=parseInt(b.getAttribute("data-like-count"),10);b.setAttribute("data-like-count",f+1);a.Squarespace.SimpleLike.renderLikeCount(b);b.addClass("clicked");try{localStorage&&(c[d]=!0,localStorage.setItem("squarespace-likes",a.JSON.stringify(c)))}catch(g){console.warn("Unable to save like to local storage: ",g)}(new a.Squarespace.Models.ContentItem({id:d})).like(function(b,c){c.commited&&console.log("Like was counted!");a.Lang.isValue(b)&&b.crumbFail&&
!a.Squarespace.Utils.areCookiesEnabled()&&alert(k("You need to enable cookies to be able to like something."))})}}},"body",".sqs-simple-like");this.eventHandlers.push(d);a.all(".sqs-simple-like").each(function(d){var f=d.getAttribute("data-item-id");f&&(b.SQUARESPACE_CONTEXT.websiteSettings.simpleLikingEnabled||d.remove(),c[f]&&d.addClass("clicked"),a.Squarespace.SimpleLike.renderLikeCount(d))})}},detach:function(){this.attached=!1;this.eventHandlers.forEach(function(a){a.detach()})},renderLikeCount:function(b){var f=
b.getAttribute("data-item-id"),d=b.getAttribute("data-like-count");b=b.one(".like-count");f&&b&&(f="",f=0===d?a.Squarespace.SimpleLike.TEXT_LIKE_VERB_NONE:1==d?"1 "+a.Squarespace.SimpleLike.TEXT_LIKE_VERB_SINGULAR:d+" "+a.Squarespace.SimpleLike.TEXT_LIKE_VERB_PLURAL,b.setContent(f))},burst:function(b){var f=b.cloneNode(!0);f.one(".like-count")&&f.one(".like-count").remove();var d=b.one(".like-icon");if(!d||"none"===d.getStyle("display"))d=b;f.setStyles({position:"absolute",left:d.getX()+"px",top:d.getY()+
"px"});a.one(a.config.doc.body).append(f);b=new a.Anim({node:f,duration:2,easing:a.Easing.easeOut});b.set("to",{curve:a.Squarespace.SimpleLike.randomCurve(f)});b.on("end",function(){this.get("node").remove()});b.run();f.removeClass("clicked");f.addClass("float")},randomCurve:function(a){var b=[],d=Math.floor(2*Math.random())?1:-1,e=Math.floor(2*Math.random())?1:-1,g=a.getX();a=a.getY();for(var h=0;3>h;++h)g+=Math.floor(30*Math.random())*d,a+=Math.floor(30*Math.random())*e,b.push([g,a]);return b}};
a.config.win.Squarespace.onInitialize(a,function(){b.SQUARESPACE_CONTEXT.websiteSettings.simpleLikingEnabled&&a.Squarespace.SimpleLike.attach()});a.config.win.Squarespace.onDestroy(a,function(){!0===a.Squarespace.SimpleLike.attached&&a.Squarespace.SimpleLike.detach()})},"1.0",{requires:["anim","json","node","squarespace-models-content-item","squarespace-util"]})}});
