webpackJsonp([27],{0:function(z,A,a){a(3464);a(1422);a(1447);a(1446);a(1017);a(916);a(1016);a(1448);a(1331);a(3463)},916:function(z,A){YUI.add("datatype-date-format",function(a,g){var d=function(b,e,a){"undefined"===typeof a&&(a=10);for(e+="";parseInt(b,10)<a&&1<a;a/=10)b=e+b;return b.toString()},f={formats:{a:function(b,e){return e.a[b.getDay()]},A:function(b,e){return e.A[b.getDay()]},b:function(b,e){return e.b[b.getMonth()]},B:function(b,e){return e.B[b.getMonth()]},C:function(b){return d(parseInt(b.getFullYear()/
100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(b){return d(parseInt(f.formats.G(b)%100,10),0)},G:function(b){var e=b.getFullYear(),a=parseInt(f.formats.V(b),10);b=parseInt(f.formats.W(b),10);b>a?e++:0===b&&52<=a&&e--;return e},H:["getHours","0"],I:function(b){b=b.getHours()%12;return d(0===b?12:b,0)},j:function(b){var e=new Date(""+b.getFullYear()+"/1/1 GMT");b=new Date(""+b.getFullYear()+"/"+(b.getMonth()+1)+"/"+b.getDate()+" GMT")-e;b=parseInt(b/6E4/60/24,10)+1;return d(b,0,100)},k:["getHours",
" "],l:function(b){b=b.getHours()%12;return d(0===b?12:b," ")},m:function(b){return d(b.getMonth()+1,0)},M:["getMinutes","0"],p:function(b,e){return e.p[12<=b.getHours()?1:0]},P:function(b,e){return e.P[12<=b.getHours()?1:0]},s:function(b,e){return parseInt(b.getTime()/1E3,10)},S:["getSeconds","0"],u:function(b){b=b.getDay();return 0===b?7:b},U:function(b){var e=parseInt(f.formats.j(b),10);b=6-b.getDay();e=parseInt((e+b)/7,10);return d(e,0)},V:function(b){var e=parseInt(f.formats.W(b),10),a=(new Date(""+
b.getFullYear()+"/1/1")).getDay(),e=e+(4<a||1>=a?0:1);53===e&&4>(new Date(""+b.getFullYear()+"/12/31")).getDay()?e=1:0===e&&(e=f.formats.V(new Date(""+(b.getFullYear()-1)+"/12/31")));return d(e,0)},w:"getDay",W:function(b){var e=parseInt(f.formats.j(b),10);b=7-f.formats.u(b);e=parseInt((e+b)/7,10);return d(e,0,10)},y:function(b){return d(b.getFullYear()%100,0)},Y:"getFullYear",z:function(b){b=b.getTimezoneOffset();var e=d(parseInt(Math.abs(b/60),10),0),a=d(Math.abs(b%60),0);return(0<b?"-":"+")+e+
a},Z:function(b){var e=b.toString().replace(/^.*:\d\d( GMT[+-]\d+)? \(?([A-Za-z ]+)\)?\d*$/,"$2").replace(/[a-z ]/g,"");4<e.length&&(e=f.formats.z(b));return e},"%":function(b){return"%"}},aggregates:{c:"locale",D:"%m/%d/%y",F:"%Y-%m-%d",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"\t",T:"%H:%M:%S",x:"locale",X:"locale"},format:function(b,e){e=e||{};if(!a.Lang.isDate(b))return a.Lang.isValue(b)?b:"";var q,n;q=e.format||"%Y-%m-%d";n=a.Intl.get("datatype-date-format");for(var g=function(e,b){var a=f.aggregates[b];
return"locale"===a?n[b]:a},t=function(e,q){var g=f.formats[q];switch(a.Lang.type(g)){case "string":return b[g]();case "function":return g.call(b,b,n);case "array":if("string"===a.Lang.type(g[0]))return d(b[g[0]](),g[1]);default:return q}};q.match(/%[cDFhnrRtTxX]/);)q=q.replace(/%([cDFhnrRtTxX])/g,g);q=q.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g,t);g=t=void 0;return q}};a.mix(a.namespace("Date"),f);a.namespace("DataType");a.DataType.Date=a.Date},"3.17.2",{lang:"ar ar-JO ca ca-ES da da-DK de de-AT de-DE el el-GR en en-AU en-CA en-GB en-IE en-IN en-JO en-MY en-NZ en-PH en-SG en-US es es-AR es-BO es-CL es-CO es-EC es-ES es-MX es-PE es-PY es-US es-UY es-VE fi fi-FI fr fr-BE fr-CA fr-FR hi hi-IN hu id id-ID it it-IT ja ja-JP ko ko-KR ms ms-MY nb nb-NO nl nl-BE nl-NL pl pl-PL pt pt-BR ro ro-RO ru ru-RU sv sv-SE th th-TH tr tr-TR vi vi-VN zh-Hans zh-Hans-CN zh-Hant zh-Hant-HK zh-Hant-TW".split(" ")})},
1016:function(z,A){YUI.add("datatype-date-math",function(a,g){var d=a.Lang;a.mix(a.namespace("Date"),{isValidDate:function(a){return d.isDate(a)&&isFinite(a)&&"Invalid Date"!=a&&!isNaN(a)&&null!=a?!0:!1},areEqual:function(a,b){return this.isValidDate(a)&&this.isValidDate(b)&&a.getTime()==b.getTime()},isGreater:function(a,b){return this.isValidDate(a)&&this.isValidDate(b)&&a.getTime()>b.getTime()},isGreaterOrEqual:function(a,b){return this.isValidDate(a)&&this.isValidDate(b)&&a.getTime()>=b.getTime()},
isInRange:function(a,b,e){return this.isGreaterOrEqual(a,b)&&this.isGreaterOrEqual(e,a)},addDays:function(a,b){return new Date(a.getTime()+864E5*b)},addMonths:function(a,b){var e=a.getFullYear(),d=a.getMonth()+b,e=Math.floor(e+d/12),d=(d%12+12)%12,n=new Date(a.getTime());n.setFullYear(e);n.setMonth(d);return n},addYears:function(a,b){var e=a.getFullYear()+b,d=new Date(a.getTime());d.setFullYear(e);return d},listOfDatesInMonth:function(a){if(!this.isValidDate(a))return[];var b=this.daysInMonth(a),
e=a.getFullYear();a=a.getMonth();for(var d=[],n=1;n<=b;n++)d.push(new Date(e,a,n,12,0,0));return d},daysInMonth:function(a){if(!this.isValidDate(a))return 0;var b=a.getMonth(),e=[31,28,31,30,31,30,31,31,30,31,30,31];if(1!=b)return e[b];a=a.getFullYear();return 0===a%400?29:0===a%100?28:0===a%4?29:28}});a.namespace("DataType");a.DataType.Date=a.Date},"3.17.2",{requires:["yui-base"]})},1017:function(z,A){YUI.add("datatype-date-parse",function(a,g){a.mix(a.namespace("Date"),{parse:function(d){d=new Date(+d||
d);return a.Lang.isDate(d)?d:null}});a.namespace("Parsers").date=a.Date.parse;a.namespace("DataType");a.DataType.Date=a.Date},"3.17.2")},1331:function(z,A){YUI.add("squarespace-calendar-day-template",function(a){var g=a.Handlebars;(function(){var a=g.template;(g.templates=g.templates||{})["calendar-day.html"]=a(function(a,b,e,d,n){function g(e,a){return""}function t(a,k){var b,c,d;b='\n\t<div class="background';if((d=e["if"].call(a,(c=(c=(c=a.events,null==c||!1===c?c:c[0]),null==c||!1===c?c:c.structuredContent),
null==c||!1===c?c:c.startDate),{hash:{},inverse:l.noop,fn:l.program(5,m,k),data:k}))||0===d)b+=d;return b+='">\n\t\t<a href="'+r((c=(c=(c=a.events,null==c||!1===c?c:c[0]),null==c||!1===c?c:c.fullUrl),typeof c===w?c.apply(a):c))+'" class="background-image-link"><img data-src="'+r((c=(c=(c=a.events,null==c||!1===c?c:c[0]),null==c||!1===c?c:c.assetUrl),typeof c===w?c.apply(a):c))+'" data-image-dimensions="'+r((c=(c=(c=a.events,null==c||!1===c?c:c[0]),null==c||!1===c?c:c.originalSize),typeof c===w?c.apply(a):
c))+'" data-load="false" class="background-image"></a>\n\t</div>\n\t'}function m(e,a){return" background--iseventscollection"}function x(e,a){return" itemlist--iseventscollection"}function F(a,k){var b,c,d;b='\n\t<li class="item';if((c=e["if"].call(a,a.isMultiday,{hash:{},inverse:l.noop,fn:l.program(11,h,k),data:k}))||0===c)b+=c;if((c=e["if"].call(a,a.isSubsequentDayOfMultidayEvent,{hash:{},inverse:l.noop,fn:l.program(13,C,k),data:k}))||0===c)b+=c;b+='">\n\t\t<a href="';(c=e.fullUrl)?c=c.call(a,{hash:{},
data:k}):(c=a.fullUrl,c=typeof c===w?c.apply(a):c);b+=r(c)+'" class="item-link">\n\t\t\t<span class="item-time item-time--12hr">';d={hash:{},data:k};b+=r((c=e["calendar-compact-time-format"]||a["calendar-compact-time-format"],c?c.call(a,(c=a.structuredContent,null==c||!1===c?c:c.startDate),d):B.call(a,"calendar-compact-time-format",(c=a.structuredContent,null==c||!1===c?c:c.startDate),d)))+'&nbsp;</span>\n\t\t\t<span class="item-time item-time--24hr">';d={hash:{format:"%H:%M"},data:k};b+=r((c=e["date-format"]||
a["date-format"],c?c.call(a,(c=a.structuredContent,null==c||!1===c?c:c.startDate),d):B.call(a,"date-format",(c=a.structuredContent,null==c||!1===c?c:c.startDate),d)))+'&nbsp;</span>\n\t\t\t<span class="item-title">';(c=e.title)?c=c.call(a,{hash:{},data:k}):(c=a.title,c=typeof c===w?c.apply(a):c);b+=r(c)+"</span>\n\t\t\t";if((c=e["if"].call(a,a.isMultiday,{hash:{},inverse:l.noop,fn:l.program(15,E,k),data:k}))||0===c)b+=c;return b+"\n\t\t</a>\n\t</li>\n\t"}function h(a,e){return" item--multiday"}function C(a,
e){return" item--ongoing"}function E(a,k){var b,c;b={hash:{format:"%b %e"},data:k};return b='<span class="item-enddate">&nbsp;'+(r((c=e["date-format"]||a["date-format"],c?c.call(a,(c=a.structuredContent,null==c||!1===c?c:c.endDate),b):B.call(a,"date-format",(c=a.structuredContent,null==c||!1===c?c:c.endDate),b)))+"</span>")}function y(a,e){return" flyoutitemlist--iseventscollection"}function M(a,e){return" \n\t\tflyoutitemlist--hasmorecontent\n\t"}function s(a,b){var k,c,d;k="\n\t\t";d={hash:{},inverse:l.noop,
fn:l.program(22,z,b),data:b};(c=e.events)?c=c.call(a,d):(c=a.events,c=typeof c===w?c.apply(a):c);e.events||(c=N.call(a,c,d));if(c||0===c)k+=c;return k+"\n\t"}function z(a,k){var b,c;b="\n\t\t\t";if((c=e["if"].call(a,a.excerpt,{hash:{},inverse:l.program(25,G,k),fn:l.program(23,A,k),data:k}))||0===c)b+=c;return b+"\n\t\t"}function A(a,e){return" \n\t\t\t\tflyoutitemlist--hasmorecontent\n\t\t\t"}function G(a,k){var b,c,d;b="\n\t\t\t\t";if((d=e["if"].call(a,(c=a.location,null==c||!1===c?c:c.addressLine1),
{hash:{},inverse:l.noop,fn:l.program(26,D,k),data:k}))||0===d)b+=d;return b+"\n\t\t\t"}function D(a,e){return" \n\t\t\t\t\tflyoutitemlist--hasmorecontent\n\t\t\t\t"}function I(a,b){var d,c,h;d='\n\t<li class="flyoutitem';if((c=e["if"].call(a,a.isMultiday,{hash:{},inverse:l.noop,fn:l.program(29,J,b),data:b}))||0===c)d+=c;if((c=e["if"].call(a,a.isSubsequentDayOfMultidayEvent,{hash:{},inverse:l.noop,fn:l.program(31,K,b),data:b}))||0===c)d+=c;d+='">\n\t\t<h1 class="flyoutitem-title"><a href="';(c=e.fullUrl)?
c=c.call(a,{hash:{},data:b}):(c=a.fullUrl,c=typeof c===w?c.apply(a):c);d+=r(c)+'" class="flyoutitem-link">';(c=e.title)?c=c.call(a,{hash:{},data:b}):(c=a.title,c=typeof c===w?c.apply(a):c);d+=r(c);if((c=e["if"].call(a,a.isMultiday,{hash:{},inverse:l.noop,fn:l.program(33,H,b),data:b}))||0===c)d+=c;d+='&nbsp;<span class="flyoutitem-link-arrow"></span></a></h1>\n\t\t<div class="flyoutitem-datetime flyoutitem-datetime--12hr">\n\t\t\t';if((c=e["if"].call(a,a.isMultiday,{hash:{},inverse:l.program(37,L,
b),fn:l.program(35,O,b),data:b}))||0===c)d+=c;d+='\n\t\t</div>\n\t\t<div class="flyoutitem-datetime flyoutitem-datetime--24hr">\n\t\t\t';if((c=e["if"].call(a,a.isMultiday,{hash:{},inverse:l.program(41,k,b),fn:l.program(39,v,b),data:b}))||0===c)d+=c;d+='\n\t\t</div>\n\t\t<div class="flyoutitem-location">\n\t\t\t';if((h=e["if"].call(a,(c=a.location,null==c||!1===c?c:c.addressTitle),{hash:{},inverse:l.noop,fn:l.program(43,P,b),data:b}))||0===h)d+=h;d+="\n\t\t\t";if((h=e["if"].call(a,(c=a.location,null==
c||!1===c?c:c.addressLine1),{hash:{},inverse:l.noop,fn:l.program(45,Q,b),data:b}))||0===h)d+=h;d+="\n\t\t\t";if((h=e["if"].call(a,(c=a.location,null==c||!1===c?c:c.addressLine2),{hash:{},inverse:l.noop,fn:l.program(47,R,b),data:b}))||0===h)d+=h;d+="\n\t\t\t";if((h=e["if"].call(a,(c=a.location,null==c||!1===c?c:c.addressCountry),{hash:{},inverse:l.noop,fn:l.program(49,S,b),data:b}))||0===h)d+=h;d+="\n\t\t</div>\n\t\t";if((h=e["if"].call(a,a.excerpt,{hash:{},inverse:l.noop,fn:l.program(51,T,b),data:b}))||
0===h)d+=h;return d+"\n\t</li>\n\t"}function J(a,e){return" flyoutitem--multiday"}function K(a,e){return" flyoutitem--ongoing"}function H(a,b){var d,c;d={hash:{format:"%b %e"},data:b};return d=' <span class="flyoutitem-enddate">'+(r((c=e["date-format"]||a["date-format"],c?c.call(a,(c=a.structuredContent,null==c||!1===c?c:c.endDate),d):B.call(a,"date-format",(c=a.structuredContent,null==c||!1===c?c:c.endDate),d)))+"</span>")}function O(a,b){var d,c,k;k={hash:{format:"%a, %b %e, %l:%M%P"},data:b};d=
"\n\t\t\t\t"+(r((c=e["date-format"]||a["date-format"],c?c.call(a,(c=a.structuredContent,null==c||!1===c?c:c.startDate),k):B.call(a,"date-format",(c=a.structuredContent,null==c||!1===c?c:c.startDate),k)))+" &ndash; ");k={hash:{format:"%a, %b %e, %l:%M%P"},data:b};return d+=r((c=e["date-format"]||a["date-format"],c?c.call(a,(c=a.structuredContent,null==c||!1===c?c:c.endDate),k):B.call(a,"date-format",(c=a.structuredContent,null==c||!1===c?c:c.endDate),k)))+"\n\t\t\t"}function L(a,b){var d,c,k;k={hash:{format:"%l:%M%P"},
data:b};d="\n\t\t\t\t"+(r((c=e["date-format"]||a["date-format"],c?c.call(a,(c=a.structuredContent,null==c||!1===c?c:c.startDate),k):B.call(a,"date-format",(c=a.structuredContent,null==c||!1===c?c:c.startDate),k)))+" &ndash; ");k={hash:{format:"%l:%M%P"},data:b};return d+=r((c=e["date-format"]||a["date-format"],c?c.call(a,(c=a.structuredContent,null==c||!1===c?c:c.endDate),k):B.call(a,"date-format",(c=a.structuredContent,null==c||!1===c?c:c.endDate),k)))+"\n\t\t\t"}function v(a,b){var d,c,k;k={hash:{format:"%a, %b %e, %H:%M"},
data:b};d="\n\t\t\t\t"+(r((c=e["date-format"]||a["date-format"],c?c.call(a,(c=a.structuredContent,null==c||!1===c?c:c.startDate),k):B.call(a,"date-format",(c=a.structuredContent,null==c||!1===c?c:c.startDate),k)))+" &ndash; ");k={hash:{format:"%a, %b %e, %H:%M"},data:b};return d+=r((c=e["date-format"]||a["date-format"],c?c.call(a,(c=a.structuredContent,null==c||!1===c?c:c.endDate),k):B.call(a,"date-format",(c=a.structuredContent,null==c||!1===c?c:c.endDate),k)))+"\n\t\t\t"}function k(a,b){var d,c,
k;k={hash:{format:"%H:%M"},data:b};d="\n\t\t\t\t"+(r((c=e["date-format"]||a["date-format"],c?c.call(a,(c=a.structuredContent,null==c||!1===c?c:c.startDate),k):B.call(a,"date-format",(c=a.structuredContent,null==c||!1===c?c:c.startDate),k)))+" &ndash; ");k={hash:{format:"%H:%M"},data:b};return d+=r((c=e["date-format"]||a["date-format"],c?c.call(a,(c=a.structuredContent,null==c||!1===c?c:c.endDate),k):B.call(a,"date-format",(c=a.structuredContent,null==c||!1===c?c:c.endDate),k)))+"\n\t\t\t"}function P(a,
e){var b,c;return b=""+('<div class="flyoutitem-location-addresstitle">'+r((c=(c=a.location,null==c||!1===c?c:c.addressTitle),typeof c===w?c.apply(a):c))+"</div>")}function Q(a,e){var b,c;return b=""+('<div class="flyoutitem-location-address1">'+r((c=(c=a.location,null==c||!1===c?c:c.addressLine1),typeof c===w?c.apply(a):c))+"</div>")}function R(a,e){var b,c;return b=""+('<div class="flyoutitem-location-address2">'+r((c=(c=a.location,null==c||!1===c?c:c.addressLine2),typeof c===w?c.apply(a):c))+"</div>")}
function S(a,e){var b,c;return b=""+('<div class="flyoutitem-location-addresscountry">'+r((c=(c=a.location,null==c||!1===c?c:c.addressCountry),typeof c===w?c.apply(a):c))+"</div>")}function T(a,b){var d,c;d='<div class="flyoutitem-excerpt">';(c=e.excerpt)?c=c.call(a,{hash:{},data:b}):(c=a.excerpt,c=typeof c===w?c.apply(a):c);if(c||0===c)d+=c;return d+"</div>"}this.compilerInfo=[4,">= 1.0.0"];e=this.merge(e,a.helpers);n=n||{};a="";var p,l=this,w="function",r=this.escapeExpression,B=e.helperMissing,
N=e.blockHelperMissing;if((d=e["if"].call(b,(p=(p=b.events,null==p||!1===p?p:p[0]),null==p||!1===p?p:p.systemDataId),{hash:{},inverse:l.noop,fn:l.program(1,function(a,b){var d,c,k;d="\n\t";if((k=e["if"].call(a,(c=(c=a.events,null==c||!1===c?c:c[1]),null==c||!1===c?c:c.title),{hash:{},inverse:l.program(4,t,b),fn:l.program(2,g,b),data:b}))||0===k)d+=k;return d+"\n"},n),data:n}))||0===d)a+=d;d={hash:{format:"%a"},data:n};a=a+'\n\n<div class="marker">\n\t<div class="marker-dayname">'+(r((p=e["day-of-month-format"]||
b["day-of-month-format"],p?p.call(b,b.date,d):B.call(b,"day-of-month-format",b.date,d)))+'</div>\n\t<div class="marker-daynum">');d={hash:{format:"%e"},data:n};a+=r((p=e["day-of-month-format"]||b["day-of-month-format"],p?p.call(b,b.date,d):B.call(b,"day-of-month-format",b.date,d)))+"</div>\n</div>\n\n";if((d=e["if"].call(b,b.events,{hash:{},inverse:l.noop,fn:l.program(7,function(a,b){var d,c,k,h;d='\n<ul class="itemlist';if((k=e["if"].call(a,(c=(c=(c=a.events,null==c||!1===c?c:c[0]),null==c||!1===
c?c:c.structuredContent),null==c||!1===c?c:c.startDate),{hash:{},inverse:l.noop,fn:l.program(8,x,b),data:b}))||0===k)d+=k;d+='">\n\t';h={hash:{},inverse:l.noop,fn:l.program(10,F,b),data:b};(k=e.events)?k=k.call(a,h):(k=a.events,k=typeof k===w?k.apply(a):k);e.events||(k=N.call(a,k,h));if(k||0===k)d+=k;d+='\n</ul>\n\n<ul class="\n\tflyoutitemlist\n\t';if((k=e["if"].call(a,(c=(c=(c=a.events,null==c||!1===c?c:c[0]),null==c||!1===c?c:c.structuredContent),null==c||!1===c?c:c.startDate),{hash:{},inverse:l.noop,
fn:l.program(17,y,b),data:b}))||0===k)d+=k;d+="\n\t";if((k=e["if"].call(a,(c=(c=a.events,null==c||!1===c?c:c[1]),null==c||!1===c?c:c.title),{hash:{},inverse:l.program(21,s,b),fn:l.program(19,M,b),data:b}))||0===k)d+=k;d+='\n">\n\t';h={hash:{},inverse:l.noop,fn:l.program(28,I,b),data:b};(k=e.events)?k=k.call(a,h):(k=a.events,k=typeof k===w?k.apply(a):k);e.events||(k=N.call(a,k,h));if(k||0===k)d+=k;return d+='\n</ul>\n\n<div class="itemcount">'+r((c=(c=a.events,null==c||!1===c?c:c.length),typeof c===
w?c.apply(a):c))+"</div>\n"},n),data:n}))||0===d)a+=d;return a+="\n"})})();a.Handlebars.registerPartial("calendar-day.html".replace("/","."),g.templates["calendar-day.html"])},"1.0",{requires:["handlebars-base"]})},1422:function(z,A,a){var g=a(96);YUI.add("squarespace-calendar-core-renderer",function(a){var f=function(a){return a.recordType===g.EVENT?a.structuredContent.startDate:a.addedOn};a.Squarespace.SquarespaceCalendar=a.Base.create("SquarespaceCalendar",a.Calendar,[],{initializer:function(){this._fetchEvents()},
bindUI:function(){a.Calendar.superclass.bindUI.call(this);this.before("dateChange",this._clearEvents,this);this.after("dateChange",this._fetchEvents,this);this.after("collectionIdChange",this._fetchEvents,this)},_clearEvents:function(){this.set("events",[])},_fetchEvents:function(){var b=this.get("date"),b=a.DataType.Date.format(b,{format:"%B-%Y",locale:"en"});a.Data.get({url:this._getFetchUrl(b),success:this._parseResponse,failure:this._handleResponseError},this)},_parseResponse:function(a){this.set("events",
a)},_handleResponseError:function(a){this.fire("fetchEventsFailure");console.error("Failed fetch data: "+a)},_getFetchUrl:function(a){return"/api/open/GetItemsByMonth"+this._buildQueryString(a)},_buildQueryString:function(b){var q=this.get("collectionId"),n=this.get("pageCollectionId"),f=this.get("category"),g=this.get("tag"),m=this.get("author");b="?collectionId="+q+"&month="+b+(f?"&category="+f:"")+(g?"&tag="+g:"")+(m?"&author="+m:"");a.Lang.isValue(n)&&(b+="&pageCollectionId="+n);return b}},{ATTRS:{events:{value:[],
validator:a.Lang.isArray},collectionId:{value:null,validator:a.Lang.isString},pageCollectionId:{value:null,validator:a.Lang.isString},category:{value:"",validator:a.Lang.isString},tag:{value:"",validator:a.Lang.isString},author:{value:"",validator:a.Lang.isString}}});a.Squarespace.CalendarBaseRenderer=a.Base.create("CalendarBaseRenderer",a.Plugin.Base,[],{initializer:function(a){this.host=a.host;this.afterHostEvent("eventsChange",this._onEventsChange,this)},_onEventsChange:function(b){var q=null;
a.Lang.isArray(b.newVal)&&0<b.newVal.length&&(q=a.bind(this._calendarFilterFunction,this));this.host.set("customRenderer",{rules:{all:"events"},filterFunction:q})},_calendarFilterFunction:function(a,b,d){d=this.host.get("events");d=this._getEventsOfDay(d,a);this._sortEvents(d);this._renderDay(a,b,d)},_renderDay:function(a,b,d){0<d.length&&b.setStyle("background","gray")},_sortEvents:function(a){a.sort(function(a,b){var d=f(a);return f(b)-d})},_getEventsOfDay:function(b,q){var f=a.DataType.Date.format(q,
{format:"%Y-%m-%d"});return a.Lang.isArray(b)&&0<b.length?a.Array.filter(b,function(a){return this._isEventPartOfDay(a,f)},this):[]},_isEventPartOfDay:function(b,q){var f,u;u=b.structuredContent;if(b.recordType!==g.EVENT)return f=a.Squarespace.DateUtils.dateFormat(b.addedOn,{format:"%Y-%m-%d"}),f===q;f=a.Squarespace.DateUtils.dateFormat(u.startDate,{format:"%Y-%m-%d"});u=a.Squarespace.DateUtils.dateFormat(u.endDate,{format:"%Y-%m-%d"});return q==f||q==u||new Date(q)>new Date(f)&&new Date(q)<new Date(u)?
!0:!1},_getEventDisplayTime:function(b){b=f(b);return a.Squarespace.DateUtils.dateFormat(b,{format:"%l:%M%P"}).trim()},_isSameDay:function(b,f){if(b.recordType!==g.EVENT)return!0;var n=a.Squarespace.DateUtils.dateFormat(b.structuredContent.startDate,{format:"%Y-%m-%d"}),u=a.DataType.Date.format(f,{format:"%Y-%m-%d"});return n===u}},{NS:"calendarPlugin"});var b=a.namespace("Squarespace").SquarespaceCalendarRenderer=a.Base.create("squarespaceCalendarRenderer",a.Squarespace.CalendarBaseRenderer,[],{initializer:function(b){this._loadingSpinner=
new a.Squarespace.Spinner({color:"dark",size:"extra-large",render:this.host.get("contentBox")});this.onceAfterHostEvent("eventsChange",this._renderCalendar);this.onceAfterHostEvent("fetchEventsFailure",function(){this._loadingSpinner&&this._loadingSpinner.destroy(!0);window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.isLoggedIn()&&this.host.get("boundingBox").ancestor().append('<div class="sqs-state-message">Please choose a valid collection for this calendar to display. It is possible that this calendar is pointing to a deleted collection.</div>');
this.host.destroy()},this);this._bindUI()},destructor:function(){this._loadingSpinner&&this._loadingSpinner.destroy(!0);this._resizeEvent.detach()},_bindUI:function(){this._resizeEvent=a.on("resize",this._syncUI,a.config.win,this)},_syncUI:function(){this.host.get("contentBox").getDOMNode()&&(this._fitToContainer(),this._setupCells(),this.host.get("contentBox").hasClass(b.COMPACT_LAYOUT_CLASS)||this._loadImages(),this._setFlyoutHeights())},_onEventsChange:function(b){b=a.bind(this._calendarFilterFunction,
this);this.host.set("customRenderer",{rules:{all:{all:{all:{0:"sunday",1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday"}}}},filterFunction:b});this.get("isRendered")&&this._syncUI()},_calendarFilterFunction:function(a,d,f){b.superclass._calendarFilterFunction.apply(this,arguments);0<=f.indexOf("sunday")?d.addClass("sunday"):0<=f.indexOf("monday")?d.addClass("monday"):0<=f.indexOf("friday")?d.addClass("friday"):0<=f.indexOf("saturday")&&d.addClass("saturday")},_fitToContainer:function(){var a=
this.host.get("contentBox");a.toggleClass(b.SMALL_LAYOUT_CLASS,770>=a.get("offsetWidth"));a.toggleClass(b.COMPACT_LAYOUT_CLASS,600>=a.get("offsetWidth"));a.toggleClass(b.TINY_LAYOUT_CLASS,300>=a.get("offsetWidth"))},_setupHeader:function(){this.host.get("contentBox").one(".yui3-calendar-header-label").wrap("<h1></h1>")},_setupCells:function(){var a=this.host.get("contentBox").one("table");a.setStyle("width",null);this.cellSpacing=parseInt(a.getComputedStyle("borderSpacing"),10);var b=7*parseInt((a.get("offsetWidth")-
8*this.cellSpacing)/7,10)+8*this.cellSpacing;a.setStyle("width",b);a.all("td").setStyles({width:parseInt(b/7,10)-this.cellSpacing,height:parseInt(b/7,10)-this.cellSpacing})},_loadImages:function(){this.host.get("contentBox").all("img[data-src]").each(function(a){ImageLoader.load(a,{mode:"fill",load:!0})},this)},_setFlyoutHeights:function(){this.host.get("contentBox").all(".flyoutitemlist--hasmorecontent").each(function(a){var b=a.ancestor("tr"),d=this._getRowHeight(b),b=a.ancestor("tr:nth-child(4)")||
a.ancestor("tr:nth-child(5)")||a.ancestor("tr:nth-child(6)")?this._getRowHeight(b.previous("tr")):this._getRowHeight(b.next("tr"));a.setStyle("height",d+b+this.cellSpacing)},this);this.host.get("contentBox").all("tr").removeAttribute("data-row-height")},_getRowHeight:function(a){if(a.getAttribute("data-row-height"))return parseInt(a.getAttribute("data-row-height"),10);var b=a.get("offsetHeight");a.setAttribute("data-row-height",b);return b},_renderCalendar:function(){this._setupHeader();this._syncUI();
this._loadingSpinner&&this._loadingSpinner.destroy(!0);this.host.get("boundingBox").addClass("loaded");this.set("isRendered",!0)},_renderDay:function(a,b,d){this.setAttrs({date:a,node:b,events:this._groupEvents(d,a)});this._highlightToday();this._highlightDaysWithEvents();a=this._getTemplateInfo().template(this._getHBTemplateContext());b.empty().append(a)},_highlightToday:function(){var e=new Date,e=new Date(e.setMinutes(e.getMinutes()+a.Squarespace.DateUtils.getTimeOffsetToWebsiteTimezone(e)));this.get("date").setHours(0,
0,0,0)===e.setHours(0,0,0,0)&&this.get("node").addClass(b.TODAY_CLASS)},_highlightDaysWithEvents:function(){0<this.get("events").length&&this.get("node").addClass(b.HAS_EVENT_CLASS)},_getTemplateInfo:function(){return{template:a.Squarespace.UITemplates.getCompiledTemplate(b.HANDLEBARS_TEMPLATE)}},_getHBTemplateContext:function(){return{date:this.get("date"),events:this.get("events")}},_groupEvents:function(b,f){var g=[],u=[];a.Array.each(b,function(a){this._isSameDay(a,f)?g.unshift(a):(a.isSubsequentDayOfMultidayEvent=
!0,u.unshift(a));this._isMultidayEvent(a)&&(a.isMultiday=!0)},this);return u.concat(g)},_isMultidayEvent:function(b){if(b.recordType===g.EVENT){var f=b.structuredContent;b=a.Squarespace.DateUtils.dateFormat(f.startDate,{format:"%d%m%Y"});f=a.Squarespace.DateUtils.dateFormat(f.endDate,{format:"%d%m%Y"});return b!==f}}},{NS:"calendarPlugin",TODAY_CLASS:"today",HAS_EVENT_CLASS:"has-event",SMALL_LAYOUT_CLASS:"small-layout",COMPACT_LAYOUT_CLASS:"compact-layout",TINY_LAYOUT_CLASS:"tiny-layout",HANDLEBARS_TEMPLATE:"calendar-day.html"});
a.Handlebars.registerHelper("day-of-month-format",function(b,f){return a.DataType.Date.format(b,{format:f.hash.format||"%B %e, %Y"})});a.Handlebars.registerHelper("date-format",function(b,f){return a.Squarespace.DateUtils.dateFormat(b,{format:f.hash.format||"%B %e, %Y"})});a.Handlebars.registerHelper("calendar-compact-time-format",function(b){var f="PM"==a.Squarespace.DateUtils.dateFormat(b,{format:"%p"})?"p":"a";return 0===(new Date(b)).getMinutes()?a.Squarespace.DateUtils.dateFormat(b,{format:"%l"})+
f:a.Squarespace.DateUtils.dateFormat(b,{format:"%l:%M"})+f})},"1.0",{requires:"base calendar node squarespace-attr-validators squarespace-calendar-day-template squarespace-date-utils squarespace-spinner squarespace-ui-base squarespace-ui-templates squarespace-widgets-alert".split(" ")})},1446:function(z,A){YUI.add("calendar-base",function(a,g){function d(){d.superclass.constructor.apply(this,arguments)}var f=a.ClassNameManager.getClassName,b=f("calendar","grid"),e=f("calendar","left-grid"),q=f("calendar",
"right-grid"),n=f("calendar","body"),u=f("calendar","header"),t=f("calendar","header-label"),m=f("calendar","weekdayrow"),x=f("calendar","weekday"),F=f("calendar","column-hidden"),h=f("calendar","day-selected"),C=f("calendar","selection-disabled"),E=f("calendar","row"),y=f("calendar","day"),M=f("calendar","prevmonth-day"),s=f("calendar","nextmonth-day"),z=f("calendar","anchor"),A=f("calendar","pane"),f=f("calendar","status"),G=a.Lang,D=G.sub,I=a.Array.each,J=a.Object.each,K=a.Array.indexOf,H=a.Object.hasKey,
O=a.Object.setValue,L=a.Object.isEmpty,v=a.DataType.Date;a.CalendarBase=a.extend(d,a.Widget,{_paneProperties:{},_paneNumber:1,_calendarId:null,_selectedDates:{},_rules:{},_filterFunction:null,_storedDateCells:{},initializer:function(){this._paneProperties={};this._calendarId=a.guid("calendar");this._selectedDates={};L(this._rules)&&(this._rules={});this._storedDateCells={}},renderUI:function(){this.get("contentBox").appendChild(this._initCalendarHTML(this.get("date")));this.get("showPrevMonth")&&
this._afterShowPrevMonthChange();this.get("showNextMonth")&&this._afterShowNextMonthChange();this._renderCustomRules();this._renderSelectedDates();this.get("boundingBox").setAttribute("aria-labelledby",this._calendarId+"_header")},bindUI:function(){this.after("dateChange",this._afterDateChange);this.after("showPrevMonthChange",this._afterShowPrevMonthChange);this.after("showNextMonthChange",this._afterShowNextMonthChange);this.after("headerRendererChange",this._afterHeaderRendererChange);this.after("customRendererChange",
this._afterCustomRendererChange);this.after("enabledDatesRuleChange",this._afterCustomRendererChange);this.after("disabledDatesRuleChange",this._afterCustomRendererChange);this.after("focusedChange",this._afterFocusedChange);this.after("selectionChange",this._renderSelectedDates);this._bindCalendarEvents()},_getSelectedDatesList:function(){var a=[];J(this._selectedDates,function(b){J(b,function(b){J(b,function(b){a.push(b)},this)},this)},this);return a},_getSelectedDatesInMonth:function(b){var d=
b.getFullYear();b=b.getMonth();return H(this._selectedDates,d)&&H(this._selectedDates[d],b)?a.Object.values(this._selectedDates[d][b]):[]},_isNumInList:function(a,b){if("all"===b)return!0;for(var d=b.split(","),e=d.length,h;e--;)if(h=d[e].split("-"),2===h.length&&a>=parseInt(h[0],10)&&a<=parseInt(h[1],10)||1===h.length&&parseInt(d[e],10)===a)return!0;return!1},_getRulesForDate:function(a){var b=a.getFullYear(),d=a.getMonth(),e=a.getDate();a=a.getDay();var h=this._rules,f=[],p,l,g,C;for(p in h)if(this._isNumInList(b,
p))if(G.isString(h[p]))f.push(h[p]);else for(l in h[p])if(this._isNumInList(d,l))if(G.isString(h[p][l]))f.push(h[p][l]);else for(g in h[p][l])if(this._isNumInList(e,g))if(G.isString(h[p][l][g]))f.push(h[p][l][g]);else for(C in h[p][l][g])this._isNumInList(a,C)&&G.isString(h[p][l][g][C])&&f.push(h[p][l][g][C]);return f},_matchesRule:function(a,b){return 0<=K(this._getRulesForDate(a),b)},_canBeSelected:function(a){var b=this.get("enabledDatesRule"),d=this.get("disabledDatesRule");return b?this._matchesRule(a,
b):d?!this._matchesRule(a,d):!0},selectDates:function(a){v.isValidDate(a)?this._addDateToSelection(a):G.isArray(a)&&this._addDatesToSelection(a);return this},deselectDates:function(a){a?v.isValidDate(a)?this._removeDateFromSelection(a):G.isArray(a)&&this._removeDatesFromSelection(a):this._clearSelection();return this},_addDateToSelection:function(a,b){a=this._normalizeTime(a);if(this._canBeSelected(a)){var d=a.getFullYear(),e=a.getMonth(),h=a.getDate();H(this._selectedDates,d)?H(this._selectedDates[d],
e)||(this._selectedDates[d][e]={}):(this._selectedDates[d]={},this._selectedDates[d][e]={});this._selectedDates[d][e][h]=a;this._selectedDates=O(this._selectedDates,[d,e,h],a);b||this._fireSelectionChange()}},_addDatesToSelection:function(a){I(a,this._addDateToSelection,this);this._fireSelectionChange()},_addDateRangeToSelection:function(a,b){var d=6E4*(b.getTimezoneOffset()-a.getTimezoneOffset()),e=a.getTime(),h=b.getTime(),f;e>h?(f=e,e=h,h=f+d):h-=d;for(d=e;d<=h;d+=864E5)e=new Date(d),e.setHours(12),
this._addDateToSelection(e,d);this._fireSelectionChange()},_removeDateFromSelection:function(a,b){var d=a.getFullYear(),e=a.getMonth(),h=a.getDate();H(this._selectedDates,d)&&(H(this._selectedDates[d],e)&&H(this._selectedDates[d][e],h))&&(delete this._selectedDates[d][e][h],b||this._fireSelectionChange())},_removeDatesFromSelection:function(a){I(a,this._removeDateFromSelection,this);this._fireSelectionChange()},_removeDateRangeFromSelection:function(a,b){for(var d=a.getTime(),e=b.getTime();d<=e;d+=
864E5)this._removeDateFromSelection(new Date(d),d);this._fireSelectionChange()},_clearSelection:function(a){this._selectedDates={};this.get("contentBox").all("."+h).removeClass(h).setAttribute("aria-selected",!1);a||this._fireSelectionChange()},_fireSelectionChange:function(){this.fire("selectionChange",{newSelection:this._getSelectedDatesList()})},_restoreModifiedCells:function(){var a=this.get("contentBox"),b;for(b in this._storedDateCells)a.one("#"+b).replace(this._storedDateCells[b]),delete this._storedDateCells[b]},
_renderCustomRules:function(){this.get("contentBox").all("."+y+",."+s).removeClass(C).setAttribute("aria-disabled",!1);if(!L(this._rules)){var b,d;for(b=0;b<this._paneNumber;b++)d=v.addMonths(this.get("date"),b),d=v.listOfDatesInMonth(d),I(d,a.bind(this._renderCustomRulesHelper,this))}},_renderCustomRulesHelper:function(a){var b=this.get("enabledDatesRule"),d=this.get("disabledDatesRule"),e;e=this._getRulesForDate(a);0<e.length?((b&&0>K(e,b)||!b&&d&&0<=K(e,d))&&this._disableDate(a),G.isFunction(this._filterFunction)&&
(b=this._dateToNode(a),this._storedDateCells[b.get("id")]=b.cloneNode(!0),this._filterFunction(a,b,e))):b&&this._disableDate(a)},_renderSelectedDates:function(){this.get("contentBox").all("."+h).removeClass(h).setAttribute("aria-selected",!1);var b,d;for(b=0;b<this._paneNumber;b++)d=v.addMonths(this.get("date"),b),d=this._getSelectedDatesInMonth(d),I(d,a.bind(this._renderSelectedDatesHelper,this))},_renderSelectedDatesHelper:function(a){this._dateToNode(a).addClass(h).setAttribute("aria-selected",
!0)},_disableDate:function(a){this._dateToNode(a).addClass(C).setAttribute("aria-disabled",!0)},_dateToNode:function(a){var b=a.getDate(),d=0,e=b%7;a=(12+a.getMonth()-this.get("date").getMonth())%12;var h=this._paneProperties[this._calendarId+"_pane_"+a].cutoffCol;switch(e){case 0:d=6<=h?12:5;break;case 1:d=6;break;case 2:d=0<h?7:0;break;case 3:d=1<h?8:1;break;case 4:d=2<h?9:2;break;case 5:d=3<h?10:3;break;case 6:d=4<h?11:4}return this.get("contentBox").one("#"+this._calendarId+"_pane_"+a+"_"+d+"_"+
b)},_nodeToDate:function(a){a=a.get("id").split("_").reverse();var b=parseInt(a[2],10);a=parseInt(a[0],10);var d=v.addMonths(this.get("date"),b),b=d.getFullYear(),d=d.getMonth();return new Date(b,d,a,12,0,0,0)},_bindCalendarEvents:function(){},_normalizeDate:function(a){return a?new Date(a.getFullYear(),a.getMonth(),1,12,0,0,0):null},_normalizeTime:function(a){return a?new Date(a.getFullYear(),a.getMonth(),a.getDate(),12,0,0,0):null},_getCutoffColumn:function(a,b){return 6-(this._normalizeDate(a).getDay()-
b+7)%7},_turnPrevMonthOn:function(a){var b=a.get("id"),d=v.daysInMonth(v.addMonths(this._paneProperties[b].paneDate,-1)),e;this._paneProperties[b].hasOwnProperty("daysInPrevMonth")||(this._paneProperties[b].daysInPrevMonth=0);if(d!==this._paneProperties[b].daysInPrevMonth){this._paneProperties[b].daysInPrevMonth=d;for(e=5;0<=e;e--)a.one("#"+b+"_"+e+"_"+(e-5)).set("text",d--)}},_turnPrevMonthOff:function(a){var b=a.get("id"),d;this._paneProperties[b].daysInPrevMonth=0;for(d=5;0<=d;d--)a.one("#"+b+
"_"+d+"_"+(d-5)).setContent("&nbsp;")},_cleanUpNextMonthCells:function(a){var b=a.get("id");a.one("#"+b+"_6_29").removeClass(s);a.one("#"+b+"_7_30").removeClass(s);a.one("#"+b+"_8_31").removeClass(s);a.one("#"+b+"_0_30").removeClass(s);a.one("#"+b+"_1_31").removeClass(s)},_turnNextMonthOn:function(a){var b=1,d=a.get("id"),e=this._paneProperties[d].daysInMonth,h=this._paneProperties[d].cutoffCol,f;for(f=e-22;f<h+7;f++)a.one("#"+d+"_"+f+"_"+(f+23)).set("text",b++).addClass(s);f=h;for(31===e&&1>=h?f=
2:30===e&&0===h&&(f=1);f<h+7;f++)a.one("#"+d+"_"+f+"_"+(f+30)).set("text",b++).addClass(s)},_turnNextMonthOff:function(a){var b=a.get("id"),d=this._paneProperties[b].daysInMonth,e=this._paneProperties[b].cutoffCol,h;for(h=d-22;12>=h;h++)a.one("#"+b+"_"+h+"_"+(h+23)).setContent("&nbsp;").addClass(s);h=0;for(31===d&&1>=e?h=2:30===d&&0===e&&(h=1);12>=h;h++)a.one("#"+b+"_"+h+"_"+(h+30)).setContent("&nbsp;").addClass(s)},_afterShowNextMonthChange:function(){var a=this.get("contentBox").one("#"+this._calendarId+
"_pane_"+(this._paneNumber-1));this._cleanUpNextMonthCells(a);this.get("showNextMonth")?this._turnNextMonthOn(a):this._turnNextMonthOff(a)},_afterShowPrevMonthChange:function(){var a=this.get("contentBox").one("#"+this._calendarId+"_pane_0");this.get("showPrevMonth")?this._turnPrevMonthOn(a):this._turnPrevMonthOff(a)},_afterHeaderRendererChange:function(){this.get("contentBox").one("."+t).setContent(this._updateCalendarHeader(this.get("date")))},_afterCustomRendererChange:function(){this._restoreModifiedCells();
this._renderCustomRules()},_afterDateChange:function(){var a=this.get("contentBox"),d=a.one("."+u).one("."+t),e=a.all("."+b),h=this.get("date"),f=0;a.setStyle("visibility","hidden");d.setContent(this._updateCalendarHeader(h));this._restoreModifiedCells();e.each(function(a){this._rerenderCalendarPane(v.addMonths(h,f++),a)},this);this._afterShowPrevMonthChange();this._afterShowNextMonthChange();this._renderCustomRules();this._renderSelectedDates();a.setStyle("visibility","inherit")},_initCalendarPane:function(b,
e){var h=this.get("strings.very_short_weekdays")||"Su Mo Tu We Th Fr Sa".split(" "),f=a.Intl.get("datatype-date-format").A,g=this.get("strings.first_weekday")||0,C=this._getCutoffColumn(b,g),p=v.daysInMonth(b),l="     ".split(" "),m={},E,x,n;m.weekday_row="";for(E=g;E<=g+6;E++)m.weekday_row+=D(d.WEEKDAY_TEMPLATE,{short_weekdayname:h[E%7],weekdayname:f[E%7]});m.weekday_row_template=D(d.WEEKDAY_ROW_TEMPLATE,m);for(h=0;5>=h;h++)for(f=0;12>=f;f++){g=7*h-5+f;E=e+"_"+f+"_"+g;x=y;1>g?x=M:g>p&&(x=s);if(1>
g||g>p)g="&nbsp;";n=f>=C&&f<C+7?"":F;l[h]+=D(d.CALDAY_TEMPLATE,{day_content:g,calendar_col_class:"calendar_col"+f,calendar_col_visibility_class:n,calendar_day_class:x,calendar_day_id:E})}m.body_template="";I(l,function(a){m.body_template+=D(d.CALDAY_ROW_TEMPLATE,{calday_row:a})});m.calendar_pane_id=e;m.calendar_pane_tabindex=this.get("tabIndex");m.pane_arialabel=v.format(b,{format:"%B %Y"});l=D(D(d.CALENDAR_GRID_TEMPLATE,m),d.CALENDAR_STRINGS);this._paneProperties[e]={cutoffCol:C,daysInMonth:p,paneDate:b};
return l},_rerenderCalendarPane:function(a,b){var d=this.get("strings.first_weekday")||0,d=this._getCutoffColumn(a,d),e=v.daysInMonth(a),h=b.get("id"),f,g;b.setStyle("visibility","hidden");b.setAttribute("aria-label",v.format(a,{format:"%B %Y"}));for(f=0;12>=f;f++)if(g=b.all(".calendar_col"+f),g.removeClass(F),f<d||f>=d+7)g.addClass(F);else switch(f){case 0:g=b.one("#"+h+"_0_30");30<=e?(g.set("text","30"),g.removeClass(s).addClass(y)):(g.setContent("&nbsp;"),g.removeClass(y).addClass(s));break;case 1:g=
b.one("#"+h+"_1_31");31<=e?(g.set("text","31"),g.removeClass(s).addClass(y)):(g.setContent("&nbsp;"),g.removeClass(y).addClass(s));break;case 6:g=b.one("#"+h+"_6_29");29<=e?(g.set("text","29"),g.removeClass(s).addClass(y)):(g.setContent("&nbsp;"),g.removeClass(y).addClass(s));break;case 7:g=b.one("#"+h+"_7_30");30<=e?(g.set("text","30"),g.removeClass(s).addClass(y)):(g.setContent("&nbsp;"),g.removeClass(y).addClass(s));break;case 8:g=b.one("#"+h+"_8_31"),31<=e?(g.set("text","31"),g.removeClass(s).addClass(y)):
(g.setContent("&nbsp;"),g.removeClass(y).addClass(s))}this._paneProperties[h].cutoffCol=d;this._paneProperties[h].daysInMonth=e;this._paneProperties[h].paneDate=a;b.setStyle("visibility","inherit")},_updateCalendarHeader:function(b){var d="",e=this.get("headerRenderer");a.Lang.isString(e)?d=v.format(b,{format:e}):e instanceof Function&&(d=e.call(this,b));return d},_initCalendarHeader:function(a){return D(D(d.HEADER_TEMPLATE,{calheader:this._updateCalendarHeader(a),calendar_id:this._calendarId}),d.CALENDAR_STRINGS)},
_initCalendarHTML:function(b){var e={},h=0,f,g;e.header_template=this._initCalendarHeader(b);e.calendar_id=this._calendarId;e.body_template=D(D(d.CONTENT_TEMPLATE,e),d.CALENDAR_STRINGS);g=e.body_template.replace(/\{calendar_grid_template\}/g,a.bind(function(){f=this._initCalendarPane(v.addMonths(b,h),e.calendar_id+"_pane_"+h);h++;return f},this));this._paneNumber=h;return g}},{CALENDAR_STRINGS:{calendar_grid_class:b,calendar_body_class:n,calendar_hd_class:u,calendar_hd_label_class:t,calendar_weekdayrow_class:m,
calendar_weekday_class:x,calendar_row_class:E,calendar_day_class:y,calendar_dayanchor_class:z,calendar_pane_class:A,calendar_right_grid_class:q,calendar_left_grid_class:e,calendar_status_class:f},CONTENT_TEMPLATE:'<div class="yui3-g {calendar_pane_class}" id="{calendar_id}">{header_template}<div class="yui3-u-1">{calendar_grid_template}</div></div>',ONE_PANE_TEMPLATE:'<div class="yui3-g {calendar_pane_class}" id="{calendar_id}">{header_template}<div class="yui3-u-1">{calendar_grid_template}</div></div>',
TWO_PANE_TEMPLATE:'<div class="yui3-g {calendar_pane_class}" id="{calendar_id}">{header_template}<div class="yui3-u-1-2"><div class = "{calendar_left_grid_class}">{calendar_grid_template}</div></div><div class="yui3-u-1-2"><div class = "{calendar_right_grid_class}">{calendar_grid_template}</div></div></div>',THREE_PANE_TEMPLATE:'<div class="yui3-g {calendar_pane_class}" id="{calendar_id}">{header_template}<div class="yui3-u-1-3"><div class="{calendar_left_grid_class}">{calendar_grid_template}</div></div><div class="yui3-u-1-3">{calendar_grid_template}</div><div class="yui3-u-1-3"><div class="{calendar_right_grid_class}">{calendar_grid_template}</div></div></div>',
CALENDAR_GRID_TEMPLATE:'<table class="{calendar_grid_class}" id="{calendar_pane_id}" role="grid" aria-readonly="true" aria-label="{pane_arialabel}" tabindex="{calendar_pane_tabindex}"><thead>{weekday_row_template}</thead><tbody>{body_template}</tbody></table>',HEADER_TEMPLATE:'<div class="yui3-g {calendar_hd_class}"><div class="yui3-u {calendar_hd_label_class}" id="{calendar_id}_header" aria-role="heading">{calheader}</div></div>',WEEKDAY_ROW_TEMPLATE:'<tr class="{calendar_weekdayrow_class}" role="row">{weekday_row}</tr>',
CALDAY_ROW_TEMPLATE:'<tr class="{calendar_row_class}" role="row">{calday_row}</tr>',WEEKDAY_TEMPLATE:'<th class="{calendar_weekday_class}" role="columnheader" aria-label="{weekdayname}">{short_weekdayname}</th>',CALDAY_TEMPLATE:'<td class="{calendar_col_class} {calendar_day_class} {calendar_col_visibility_class}" id="{calendar_day_id}" role="gridcell" tabindex="-1">{day_content}</td>',NAME:"calendarBase",ATTRS:{tabIndex:{value:1},date:{value:new Date,setter:function(a){a=this._normalizeDate(a);return v.areEqual(a,
this.get("date"))?this.get("date"):a}},showPrevMonth:{value:!1},showNextMonth:{value:!1},strings:{valueFn:function(){return a.Intl.get("calendar-base")}},headerRenderer:{value:"%B %Y"},enabledDatesRule:{value:null},disabledDatesRule:{value:null},selectedDates:{readOnly:!0,getter:function(){return this._getSelectedDatesList()}},customRenderer:{lazyAdd:!1,value:{},setter:function(a){this._rules=a.rules;this._filterFunction=a.filterFunction}}}})},"3.17.2",{requires:["widget","datatype-date","datatype-date-math",
"cssgrids"],lang:"de en es es-AR fr hu it ja nb-NO nl pt-BR ru zh-Hans zh-Hans-CN zh-Hant zh-Hant-HK zh-HANT-TW".split(" "),skinnable:!0})},1447:function(z,A){YUI.add("calendar",function(a,g){function d(){d.superclass.constructor.apply(this,arguments)}var f=a.ClassNameManager.getClassName,b=f("calendar","day-selected"),e=f("calendar","day-highlighted"),q=f("calendar","day"),n=f("calendar","prevmonth-day"),u=f("calendar","nextmonth-day"),t=f("calendar","grid"),m=a.DataType.Date,x=f("calendar","pane"),
F=a.UA.os;a.Calendar=a.extend(d,a.CalendarBase,{_keyEvents:[],_highlightedDateNode:null,_lastSelectedDate:null,initializer:function(){this.plug(a.Plugin.CalendarNavigator);this._keyEvents=[];this._lastSelectedDate=this._highlightedDateNode=null},_bindCalendarEvents:function(){var a=this.get("contentBox").one("."+x);a.on("selectstart",this._preventSelectionStart);a.delegate("click",this._clickCalendar,"."+q+", ."+n+", ."+u,this);a.delegate("keydown",this._keydownCalendar,"."+t,this);a.delegate("focus",
this._focusCalendarGrid,"."+t,this);a.delegate("focus",this._focusCalendarCell,"."+q,this);a.delegate("blur",this._blurCalendarGrid,"."+t+",."+q,this);this.after(["minimumDateChange","maximumDateChange"],this._afterCustomRendererChange)},_preventSelectionStart:function(a){a.preventDefault()},_highlightDateNode:function(a){this._unhighlightCurrentDateNode();a=this._dateToNode(a);a.focus();a.addClass(e)},_unhighlightCurrentDateNode:function(){var a=this.get("contentBox").all("."+e);a&&a.removeClass(e)},
_getGridNumber:function(a){a=a.get("id").split("_").reverse();return parseInt(a[0],10)},_blurCalendarGrid:function(){this._unhighlightCurrentDateNode()},_focusCalendarCell:function(a){this._highlightedDateNode=a.target;a.stopPropagation()},_focusCalendarGrid:function(){this._unhighlightCurrentDateNode();this._highlightedDateNode=null},_keydownCalendar:function(a){var d=this._getGridNumber(a.target),e=!this._highlightedDateNode?null:this._nodeToDate(this._highlightedDateNode),f=a.keyCode,g=0,x;switch(f){case 40:g=
7;break;case 38:g=-7;break;case 37:g=-1;break;case 39:g=1;break;case 32:case 13:if(a.preventDefault(),this._highlightedDateNode)if(x=this.get("selectionMode"),"single"===x&&!this._highlightedDateNode.hasClass(b))this._clearSelection(!0),this._addDateToSelection(e);else if("multiple"===x||"multiple-sticky"===x)this._highlightedDateNode.hasClass(b)?this._removeDateFromSelection(e):this._addDateToSelection(e)}if(40===f||38===f||37===f||39===f)e||(e=m.addMonths(this.get("date"),d),g=0),a.preventDefault(),
a=m.addDays(e,g),d=this.get("date"),e=m.addMonths(this.get("date"),this._paneNumber-1),f=new Date(e),e.setDate(m.daysInMonth(e)),m.isInRange(a,d,e)?this._highlightDateNode(a):m.isGreater(d,a)?m.isGreaterOrEqual(this.get("minimumDate"),d)||(this.set("date",m.addMonths(d,-1)),this._highlightDateNode(a)):m.isGreater(a,e)&&!m.isGreaterOrEqual(f,this.get("maximumDate"))&&(this.set("date",m.addMonths(d,1)),this._highlightDateNode(a))},_clickCalendar:function(a){var d=a.currentTarget,e=d.hasClass(q)&&!d.hasClass(n)&&
!d.hasClass(u),f=d.hasClass(b);switch(this.get("selectionMode")){case "single":e&&!f&&(this._clearSelection(!0),this._addDateToSelection(this._nodeToDate(d)));break;case "multiple-sticky":e&&(f?this._removeDateFromSelection(this._nodeToDate(d)):this._addDateToSelection(this._nodeToDate(d)));break;case "multiple":e&&(!a.metaKey&&!a.ctrlKey&&!a.shiftKey?(this._clearSelection(!0),this._lastSelectedDate=this._nodeToDate(d),this._addDateToSelection(this._lastSelectedDate)):("macintosh"===F&&a.metaKey||
"macintosh"!==F&&a.ctrlKey)&&!a.shiftKey?f?(this._removeDateFromSelection(this._nodeToDate(d)),this._lastSelectedDate=null):(this._lastSelectedDate=this._nodeToDate(d),this._addDateToSelection(this._lastSelectedDate)):("macintosh"===F&&a.metaKey||"macintosh"!==F&&a.ctrlKey)&&a.shiftKey?this._lastSelectedDate?(a=this._nodeToDate(d),this._addDateRangeToSelection(a,this._lastSelectedDate),this._lastSelectedDate=a):(this._lastSelectedDate=this._nodeToDate(d),this._addDateToSelection(this._lastSelectedDate)):
a.shiftKey&&(this._lastSelectedDate?(a=this._nodeToDate(d),this._clearSelection(!0),this._addDateRangeToSelection(a,this._lastSelectedDate),this._lastSelectedDate=a):(this._clearSelection(!0),this._lastSelectedDate=this._nodeToDate(d),this._addDateToSelection(this._lastSelectedDate))))}e?this.fire("dateClick",{cell:d,date:this._nodeToDate(d)}):d.hasClass(n)?this.fire("prevMonthClick"):d.hasClass(u)&&this.fire("nextMonthClick")},_canBeSelected:function(a){var b=this.get("minimumDate"),e=this.get("maximumDate");
return b&&!m.isGreaterOrEqual(a,b)||e&&m.isGreater(a,e)?!1:d.superclass._canBeSelected.call(this,a)},_renderCustomRules:function(){d.superclass._renderCustomRules.call(this);var a=this.get("minimumDate"),b=this.get("maximumDate"),e=[],f,g;if(a||b){for(g=0;g<this._paneNumber;g++)f=m.addMonths(this.get("date"),g),e=e.concat(m.listOfDatesInMonth(f));if(a){f=0;for(g=e.length;f<g&&!m.isGreaterOrEqual(e[f],a);f++)this._disableDate(e[f])}if(b)for(f=e.length-1;0<=f;f--)if(m.isGreater(e[f],b))this._disableDate(e[f]);
else break}},subtractMonth:function(a){this.set("date",m.addMonths(this.get("date"),-1));a&&a.halt();return this},subtractYear:function(a){this.set("date",m.addYears(this.get("date"),-1));a&&a.halt();return this},addMonth:function(a){this.set("date",m.addMonths(this.get("date"),1));a&&a.halt();return this},addYear:function(a){this.set("date",m.addYears(this.get("date"),1));a&&a.halt();return this}},{NAME:"calendar",ATTRS:{selectionMode:{value:"single"},date:{value:new Date,lazyAdd:!1,setter:function(a){a=
this._normalizeDate(a);var b=m.addMonths(a,this._paneNumber-1),d=this.get("minimumDate"),e=this.get("maximumDate");if((!d||m.isGreaterOrEqual(a,d))&&(!e||m.isGreaterOrEqual(e,b)))return a;if(d&&m.isGreater(d,a))return this._normalizeDate(d);if(e&&m.isGreater(b,e))return m.addMonths(this._normalizeDate(e),1-this._paneNumber)}},minimumDate:{value:null,setter:function(b){if(a.Lang.isDate(b)){var d=this.get("date"),e=this._normalizeTime(b);d&&!m.isGreaterOrEqual(d,e)&&this.set("date",b);return e}return null}},
maximumDate:{value:null,setter:function(b){if(a.Lang.isDate(b)){var d=this.get("date");d&&!m.isGreaterOrEqual(b,m.addMonths(d,this._paneNumber-1))&&this.set("date",m.addMonths(this._normalizeDate(b),1-this._paneNumber));return this._normalizeTime(b)}return null}}}})},"3.17.2",{requires:["calendar-base","calendarnavigator"],skinnable:!0})},1448:function(z,A){YUI.add("calendarnavigator",function(a,g){function d(){d.superclass.constructor.apply(this,arguments)}var f=a.ClassNameManager.getClassName,b=
a.Lang.sub,e=a.Node.create,q=f("calendar","header"),n=f("calendarnav","prevmonth"),u=f("calendarnav","nextmonth"),t=f("calendarnav","month-disabled"),m=a.DataType.Date;d.NS="navigator";d.NAME="pluginCalendarNavigator";d.ATTRS={shiftByMonths:{value:1}};d.CALENDARNAV_STRINGS={prev_month_class:n,next_month_class:u};d.PREV_MONTH_CONTROL_TEMPLATE='<a class="yui3-u {prev_month_class}" role="button" aria-label="{prev_month_arialabel}" tabindex="{control_tabindex}" />';d.NEXT_MONTH_CONTROL_TEMPLATE='<a class="yui3-u {next_month_class}" role="button" aria-label="{next_month_arialabel}" tabindex="{control_tabindex}" />';
a.extend(d,a.Plugin.Base,{_eventAttachments:{},_controls:{},initializer:function(){this._controls={};this._eventAttachments={};this.afterHostMethod("renderUI",this._initNavigationControls)},destructor:function(){},_focusNavigation:function(a){a.currentTarget.focus()},_subtractMonths:function(a){if("click"===a.type||"keydown"===a.type&&(13===a.keyCode||32===a.keyCode)){var b=this.get("host"),d=b.get("date");b.set("date",m.addMonths(d,-1*this.get("shiftByMonths")));a.preventDefault()}},_addMonths:function(a){if("click"===
a.type||"keydown"===a.type&&(13===a.keyCode||32===a.keyCode)){var b=this.get("host"),d=b.get("date");b.set("date",m.addMonths(d,this.get("shiftByMonths")));a.preventDefault()}},_updateControlState:function(){var a=this.get("host"),b=a.get("date"),d=m.addMonths(b,a._paneNumber-1),e=a._normalizeDate(a.get("minimumDate")),a=a._normalizeDate(a.get("maximumDate"));m.areEqual(e,b)?(this._eventAttachments.prevMonth&&(this._eventAttachments.prevMonth.detach(),this._eventAttachments.prevMonth=!1),this._controls.prevMonth.hasClass(t)||
this._controls.prevMonth.addClass(t).setAttribute("aria-disabled","true")):(this._eventAttachments.prevMonth||(this._eventAttachments.prevMonth=this._controls.prevMonth.on(["click","keydown"],this._subtractMonths,this)),this._controls.prevMonth.hasClass(t)&&this._controls.prevMonth.removeClass(t).setAttribute("aria-disabled","false"));m.areEqual(a,d)?(this._eventAttachments.nextMonth&&(this._eventAttachments.nextMonth.detach(),this._eventAttachments.nextMonth=!1),this._controls.nextMonth.hasClass(t)||
this._controls.nextMonth.addClass(t).setAttribute("aria-disabled","true")):(this._eventAttachments.nextMonth||(this._eventAttachments.nextMonth=this._controls.nextMonth.on(["click","keydown"],this._addMonths,this)),this._controls.nextMonth.hasClass(t)&&this._controls.nextMonth.removeClass(t).setAttribute("aria-disabled","false"));this._controls.prevMonth.on(["click","keydown"],this._focusNavigation,this);this._controls.nextMonth.on(["click","keydown"],this._focusNavigation,this)},_renderPrevControls:function(){var a=
e(b(d.PREV_MONTH_CONTROL_TEMPLATE,d.CALENDARNAV_STRINGS));a.on("selectstart",this.get("host")._preventSelectionStart);return a},_renderNextControls:function(){var a=e(b(d.NEXT_MONTH_CONTROL_TEMPLATE,d.CALENDARNAV_STRINGS));a.on("selectstart",this.get("host")._preventSelectionStart);return a},_initNavigationControls:function(){var a=this.get("host"),b=a.get("contentBox").one("."+q);d.CALENDARNAV_STRINGS.control_tabindex=a.get("tabIndex");d.CALENDARNAV_STRINGS.prev_month_arialabel="Go to previous month";
d.CALENDARNAV_STRINGS.next_month_arialabel="Go to next month";this._controls.prevMonth=this._renderPrevControls();this._controls.nextMonth=this._renderNextControls();this._updateControlState();a.after(["dateChange","minimumDateChange","maximumDateChange"],this._updateControlState,this);b.prepend(this._controls.prevMonth);b.append(this._controls.nextMonth)}});a.namespace("Plugin").CalendarNavigator=d},"3.17.2",{requires:["plugin","classnamemanager","datatype-date","node"],skinnable:!0})},3463:function(z,
A){YUI.add("squarespace-events-collection-calendar",function(a){var g=a.namespace("Squarespace").EventsCollectionCalendar=a.Base.create("eventsCollectionCalendar",a.Squarespace.SquarespaceCalendar,[],{initializer:function(){this.set("_history",new a.History);this._addHistory()},destructor:function(){this._navClickEvent.detach();this._historyChangeEvent.detach()},bindUI:function(){g.superclass.bindUI.call(this);this._navClickEvent=this.get("contentBox").delegate("click",this._addHistory,".yui3-calendarnav-prevmonth, .yui3-calendarnav-nextmonth",
this);this._historyChangeEvent=a.on("history:change",function(d){d.src===a.HistoryHTML5.SRC_POPSTATE&&d.newVal.month&&this.set("date",d.newVal.month)},this)},_addHistory:function(){var d=this.get("date"),f=this._buildQueryStringForHistoryUrl(d),f=a.config.win.location.pathname+f;this.get("_history").addValue("month",d,{url:f})},_buildQueryStringForHistoryUrl:function(d){d=a.DataType.Date.format(d,{format:"%B-%Y",locale:"en"});var f=this.get("category"),b=this.get("tag"),e=this.get("author");return"?view=calendar&month="+
d+(f?"&category="+f:"")+(b?"&tag="+b:"")+(e?"&author="+e:"")},_preventSelectionStart:null},{ATTRS:{}})},"1.0",{requires:"base datatype-date-parse history node squarespace-calendar-core-renderer squarespace-date-utils squarespace-util".split(" ")})},3464:function(z,A){YUI.add("squarespace-events-collection",function(a){a.namespace("Squarespace.EventsCollection").ListViewPlugin=a.Base.create("eventsCollectionListViewPlugin",a.Plugin.Base,[],{initializer:function(){this.set("thumbnails",this.get("host").all(".eventlist-column-thumbnail img[data-src]"));
this.get("thumbnails").each(function(g){g.plug(a.Squarespace.Loader2,{load:!0,mode:"fill"})});this._syncUI();this._bindUI()},destructor:function(){this._resizeEvent&&this._resizeEvent.detach();this._tweakChangeEvent&&this._tweakChangeEvent.detach();this._tweakResetEvent&&this._tweakResetEvent.detach()},_bindUI:function(){this._resizeEvent=a.on("windowresize",function(){this._syncUI()},a.config.win,this);this._bindTweakEvents()},_syncUI:function(){this.get("thumbnails").each(function(a){a.fire("refresh")})},
_bindTweakEvents:function(){this._tweakChangeEvent=a.Global.on("tweak:change",function(a){a=a.getName();("event-thumbnails"===a||"event-thumbnail-size"===a||"event-list-compact-view"===a||"event-show-past-events"===a)&&this._syncUI()},this);this._tweakResetEvent=a.Global.on("tweak:reset",function(a){this._syncUI()},this)}},{NS:"eventsCollection"});a.config.win.Squarespace.onInitialize(a,function(){a.one(".sqs-events-collection-list")&&a.all(".sqs-events-collection-list").each(function(g){g.plug(a.Squarespace.EventsCollection.ListViewPlugin)});
a.one(".sqs-events-collection-calendar")&&a.all(".sqs-events-collection-calendar").each(function(g){var d=a.QueryString.parse(a.config.win.location.search.substring(1)),f;f=d.month?a.Date.parse(d.month.split("-")[0]+" 1, "+d.month.split("-")[1]):a.Squarespace.DateUtils.shiftForWebsiteTimezoneDisplay(new Date);(new a.Squarespace.EventsCollectionCalendar({contentBox:g,collectionId:g.getAttribute("data-collection-id"),date:f,category:d.category||"",tag:d.tag||"",author:d.author||"",render:!0})).plug(a.Squarespace.SquarespaceCalendarRenderer)})});
a.config.win.Squarespace.onDestroy(a,function(){a.one(".sqs-events-collection-list")&&a.all(".sqs-events-collection-list").each(function(g){g.unplug(a.Squarespace.EventsCollection.ListViewPlugin)});a.one(".sqs-events-collection-calendar")&&a.all(".sqs-events-collection-calendar").each(function(g){(g=a.Widget.getByNode(g))?g.destroy():console.warn("Found a calendar wrapper that doesnt have a widget bound to it!")})});a.namespace("Squarespace").EventCollectionCalendar=a.Base.create("eventCollectionCalendar",
a.Widget,[],{render:function(){(new a.Squarespace.EventsCollectionCalendar({contentBox:this.get("contentBox"),collectionId:a.config.win.Static.SQUARESPACE_CONTEXT.collectionId,render:!0})).plug(a.Squarespace.SquarespaceCalendarRenderer)}},{ATTRS:{}})},"1.0",{requires:["base","node","squarespace-calendar-core-renderer","squarespace-events-collection-calendar","squarespace-image-loader"]})}});
